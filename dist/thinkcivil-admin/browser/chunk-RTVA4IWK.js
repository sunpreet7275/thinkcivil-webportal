import{a as yt,b as kt}from"./chunk-LMM7AXPU.js";import{a as ht,b as Ct,c as Pt,d as vt,e as St,f as Mt,g as bt}from"./chunk-4TA4R672.js";import{a as Et,c as Ot}from"./chunk-GHQD5XIY.js";import{c as X}from"./chunk-UG3TAOCT.js";import{a as gt}from"./chunk-T5SKTLKE.js";import{a as k}from"./chunk-2H4Z2K4R.js";import{a as _t}from"./chunk-KLEPB37Q.js";import"./chunk-7RWCIHFI.js";import{a as wt}from"./chunk-QBWFBDUQ.js";import"./chunk-U6CKJMGU.js";import"./chunk-CRTYOTUM.js";import{b as st,c as ct,e as dt,h as pt}from"./chunk-OBP7X3GA.js";import"./chunk-GL2RTCLG.js";import{a as z,b as N}from"./chunk-BFQVRRBQ.js";import{a as U}from"./chunk-MJ27DAE4.js";import"./chunk-7G2NQBXL.js";import{a as T,b as I,c as D,d as lt,e as mt,f as F,g as A}from"./chunk-Y4AHRI4W.js";import{a as xt,b as ft}from"./chunk-XMRX5FRA.js";import{d as y,e as K}from"./chunk-GRH6IN53.js";import{K as ut,L as R,N as B}from"./chunk-7XSJTIVU.js";import"./chunk-ZWY6WOSF.js";import{A as rt,d as w,f as Z,g as tt,l as et,o as nt,r as it,v as at,y as ot}from"./chunk-MUJPFQ6Z.js";import{Db as m,Ha as f,Mb as n,Nb as t,Ob as Q,Oc as H,Pc as E,Sb as Y,Sc as J,Tc as $,Ub as _,Vb as p,Vc as O,ec as e,fb as r,fc as u,gc as c,hc as q,ic as W,ja as d,pc as G,qc as h,ra as C,rb as M,rc as L,sa as P,sc as b,xb as g}from"./chunk-SZ6SDWKT.js";function zt(o,a){o&1&&(n(0,"mat-error"),e(1," Please select a bank "),t())}function Nt(o,a){o&1&&(n(0,"mat-error"),e(1," You must accept the terms and conditions "),t())}function Ut(o,a){o&1&&Q(0,"mat-spinner",34)}function Vt(o,a){if(o&1&&(n(0,"span"),e(1),t()),o&2){let i=p();r(),c("Pay Now \u20B9",i.calculateTotal(),"")}}var V=class o{fb=d(ot);dialogRef=d(ht);data=d(Ct);testService=d(U);router=d(y);snackBar=d(_t);authService=d(k);paymentForm;selectedPlan=f(this.data.selectedPlan);processing=f(!1);planPrices={pre:499,mains:699,combo:999};constructor(){this.paymentForm=this.fb.group({plan:[this.data.selectedPlan,w.required],bank:["",w.required],acceptTerms:[!1,w.requiredTrue]})}onPlanChange(a){this.selectedPlan.set(a)}getPlanName(a){return{pre:"PRE Foundation",mains:"MAINS Mastery",combo:"COMBO Complete"}[a]||"Unknown Plan"}getPlanAmount(a){return this.planPrices[a]||0}calculateGST(){let a=this.getPlanAmount(this.selectedPlan());return Math.round(a*.18)}calculateTotal(){let a=this.getPlanAmount(this.selectedPlan()),i=this.calculateGST();return a+i}onCancel(){this.dialogRef.close(!1)}onPayNow(){if(this.paymentForm.valid){this.processing.set(!0);let a={plan:this.selectedPlan(),bank:this.paymentForm.value.bank,amount:this.calculateTotal(),baseAmount:this.getPlanAmount(this.selectedPlan()),gst:this.calculateGST(),timestamp:new Date().toISOString()};this.testService.processPayment(a).subscribe({next:i=>{this.processing.set(!1),this.snackBar.open("Payment successful! Welcome to ThinkCivil Premium. Login again and start exploring!!","Close",{duration:5e3,panelClass:"success-snackbar"}),this.dialogRef.close(!0),this.logout()},error:i=>{this.processing.set(!1),console.error("Payment error:",i),this.snackBar.open("Payment failed. Please try again.","Close",{duration:5e3,panelClass:"error-snackbar"})}})}}logout(){this.authService.logout()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=M({type:o,selectors:[["app-payment-dialog"]],decls:87,vars:12,consts:[[1,"payment-dialog"],[1,"dialog-header"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button",3,"click"],[1,"dialog-content"],[1,"payment-form",3,"formGroup"],[1,"selected-plan"],[1,"plan-name"],[1,"plan-amount"],[1,"amount"],[1,"duration"],["appearance","outline",1,"full-width"],["formControlName","plan",3,"selectionChange"],["value","pre"],["value","mains"],["value","combo"],["matSuffix",""],["formControlName","bank","required",""],["value","sbi"],[1,"bank-option"],["value","icici"],["value","hdfc"],[4,"ngIf"],[1,"payment-summary"],[1,"summary-row"],[1,"summary-row","total"],[1,"terms-section"],["formControlName","acceptTerms","color","primary"],["href","/terms","target","_blank"],["href","/privacy","target","_blank"],["align","end",1,"dialog-actions"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",1,"pay-button",3,"click","disabled"],["diameter","20",4,"ngIf"],["diameter","20"]],template:function(i,l){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),e(3,"Complete Your Payment"),t(),n(4,"button",3),_("click",function(){return l.onCancel()}),n(5,"mat-icon"),e(6,"close"),t()()(),n(7,"mat-dialog-content",4)(8,"form",5)(9,"div",6)(10,"h3"),e(11,"Selected Plan: "),n(12,"span",7),e(13),t()(),n(14,"div",8)(15,"span",9),e(16),t(),n(17,"span",10),e(18,"/ lifetime access"),t()()(),n(19,"mat-form-field",11)(20,"mat-label"),e(21,"Choose Plan"),t(),n(22,"mat-select",12),_("selectionChange",function(x){return l.onPlanChange(x.value)}),n(23,"mat-option",13),e(24," PRE Foundation - \u20B9499 "),t(),n(25,"mat-option",14),e(26," MAINS Mastery - \u20B9699 "),t(),n(27,"mat-option",15),e(28," COMBO Complete - \u20B9999 "),t()(),n(29,"mat-icon",16),e(30,"school"),t()(),n(31,"mat-form-field",11)(32,"mat-label"),e(33,"Select Bank"),t(),n(34,"mat-select",17)(35,"mat-option",18)(36,"div",19)(37,"span"),e(38,"State Bank of India"),t()()(),n(39,"mat-option",20)(40,"div",19)(41,"span"),e(42,"ICICI Bank"),t()()(),n(43,"mat-option",21)(44,"div",19)(45,"span"),e(46,"HDFC Bank"),t()()()(),n(47,"mat-icon",16),e(48,"account_balance"),t(),g(49,zt,2,0,"mat-error",22),t(),n(50,"mat-card",23)(51,"mat-card-header")(52,"mat-card-title"),e(53,"Payment Summary"),t()(),n(54,"mat-card-content")(55,"div",24)(56,"span"),e(57,"Plan Fee:"),t(),n(58,"span"),e(59),t()(),n(60,"div",24)(61,"span"),e(62,"GST (18%):"),t(),n(63,"span"),e(64),t()(),n(65,"div",25)(66,"span")(67,"strong"),e(68,"Total Amount:"),t()(),n(69,"span")(70,"strong"),e(71),t()()()()(),n(72,"div",26)(73,"mat-checkbox",27),e(74," I agree to the "),n(75,"a",28),e(76,"Terms and Conditions"),t(),e(77," and "),n(78,"a",29),e(79,"Privacy Policy"),t()(),g(80,Nt,2,0,"mat-error",22),t()()(),n(81,"mat-dialog-actions",30)(82,"button",31),_("click",function(){return l.onCancel()}),e(83," Cancel "),t(),n(84,"button",32),_("click",function(){return l.onPayNow()}),g(85,Ut,1,0,"mat-spinner",33)(86,Vt,2,1,"span",22),t()()()),i&2){let s,x;r(8),m("formGroup",l.paymentForm),r(5),u(l.getPlanName(l.selectedPlan())),r(3),c("\u20B9",l.getPlanAmount(l.selectedPlan()),""),r(33),m("ngIf",(s=l.paymentForm.get("bank"))==null?null:s.hasError("required")),r(10),c("\u20B9",l.getPlanAmount(l.selectedPlan()),""),r(5),c("\u20B9",l.calculateGST(),""),r(7),c("\u20B9",l.calculateTotal(),""),r(9),m("ngIf",((x=l.paymentForm.get("acceptTerms"))==null?null:x.hasError("required"))&&((x=l.paymentForm.get("acceptTerms"))==null?null:x.touched)),r(2),m("disabled",l.processing()),r(2),m("disabled",!l.paymentForm.valid||l.processing()),r(),m("ngIf",l.processing()),r(),m("ngIf",!l.processing())}},dependencies:[O,E,rt,et,Z,tt,at,nt,it,bt,vt,Mt,St,gt,pt,st,ct,dt,Ot,Et,X,B,R,ut,N,z,kt,yt,A,T,D,F,I,ft,xt],styles:[".payment-dialog[_ngcontent-%COMP%]{min-width:500px;max-width:600px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px 0;border-bottom:1px solid #e0e0e0}.dialog-content[_ngcontent-%COMP%]{padding:20px 24px}.payment-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.full-width[_ngcontent-%COMP%]{width:100%}.selected-plan[_ngcontent-%COMP%]{background:#f5f5f5;padding:20px;border-radius:8px;text-align:center;border-left:4px solid #3f51b5}.plan-name[_ngcontent-%COMP%]{color:#3f51b5;font-weight:700}.plan-amount[_ngcontent-%COMP%]{margin-top:10px}.amount[_ngcontent-%COMP%]{font-size:2em;font-weight:700;color:#333}.duration[_ngcontent-%COMP%]{color:#666;font-size:.9em}.bank-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.payment-summary[_ngcontent-%COMP%]{background:#fafafa;border:1px solid #e0e0e0}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f0f0f0}.summary-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-row.total[_ngcontent-%COMP%]{border-top:2px solid #e0e0e0;padding-top:12px;margin-top:8px;font-size:1.1em}.terms-section[_ngcontent-%COMP%]{margin-top:10px}.terms-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:none}.terms-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;gap:12px}.pay-button[_ngcontent-%COMP%]{min-width:150px}@media (max-width: 600px){.payment-dialog[_ngcontent-%COMP%]{min-width:auto;width:95vw}.dialog-header[_ngcontent-%COMP%], .dialog-content[_ngcontent-%COMP%], .dialog-actions[_ngcontent-%COMP%]{padding:12px 16px}}"]})};var Yt=o=>["/result-detail",o],qt=o=>({testId:o});function Gt(o,a){o&1&&(n(0,"div",6)(1,"p"),e(2,"Loading dashboard data..."),t()())}function Lt(o,a){if(o&1){let i=Y();n(0,"div",7)(1,"div",8)(2,"mat-card",9)(3,"mat-card-header")(4,"mat-card-title"),e(5,"\u{1F680} Start Your UPSC Journey with ThinkCivil!"),t(),n(6,"mat-card-subtitle"),e(7,"Your dream of becoming a civil servant begins here"),t()(),n(8,"mat-card-content")(9,"div",10)(10,"div",11)(11,"h3"),e(12,"Unlock Your Potential with Our Comprehensive UPSC Preparation Plans"),t(),n(13,"p"),e(14,"Join thousands of successful aspirants who cracked UPSC with our structured preparation programs. Get access to expert-curated content, mock tests, and personalized guidance."),t(),n(15,"div",12)(16,"div",13)(17,"strong"),e(18,"5000+"),t(),n(19,"span"),e(20,"Students Enrolled"),t()(),n(21,"div",13)(22,"strong"),e(23,"250+"),t(),n(24,"span"),e(25,"Selections"),t()(),n(26,"div",13)(27,"strong"),e(28,"98%"),t(),n(29,"span"),e(30,"Success Rate"),t()()()(),n(31,"div",14)(32,"h4"),e(33,"What You'll Get:"),t(),n(34,"ul")(35,"li")(36,"mat-icon"),e(37,"check_circle"),t(),e(38," Comprehensive Study Materials"),t(),n(39,"li")(40,"mat-icon"),e(41,"check_circle"),t(),e(42," 1000+ Practice Questions"),t(),n(43,"li")(44,"mat-icon"),e(45,"check_circle"),t(),e(46," Full-length Mock Tests"),t(),n(47,"li")(48,"mat-icon"),e(49,"check_circle"),t(),e(50," Previous Year Papers"),t(),n(51,"li")(52,"mat-icon"),e(53,"check_circle"),t(),e(54," Performance Analytics"),t(),n(55,"li")(56,"mat-icon"),e(57,"check_circle"),t(),e(58," Expert Doubt Support"),t()()()()()()(),n(59,"div",15)(60,"h2"),e(61,"Choose Your Success Plan"),t(),n(62,"div",16)(63,"mat-card",17)(64,"mat-card-header")(65,"div",18),e(66,"Most Popular"),t(),n(67,"mat-card-title"),e(68,"PRE Foundation"),t(),n(69,"mat-card-subtitle"),e(70,"Perfect for Prelims Preparation"),t()(),n(71,"mat-card-content")(72,"div",19)(73,"span",20),e(74,"\u20B9499"),t(),n(75,"span",21),e(76,"/month"),t()(),n(77,"ul",22)(78,"li")(79,"mat-icon"),e(80,"check"),t(),e(81," 500+ Prelims MCQs"),t(),n(82,"li")(83,"mat-icon"),e(84,"check"),t(),e(85," 10 Full Mock Tests"),t(),n(86,"li")(87,"mat-icon"),e(88,"check"),t(),e(89," Current Affairs Updates"),t(),n(90,"li")(91,"mat-icon"),e(92,"check"),t(),e(93," CSAT Preparation"),t(),n(94,"li")(95,"mat-icon"),e(96,"check"),t(),e(97," Basic Analytics"),t(),n(98,"li")(99,"mat-icon"),e(100,"remove"),t(),e(101," Mains Answer Writing"),t(),n(102,"li")(103,"mat-icon"),e(104,"remove"),t(),e(105," Essay Practice"),t()()(),n(106,"mat-card-actions")(107,"button",23),_("click",function(){C(i);let s=p();return P(s.openPaymentDialog("pre"))}),e(108,` Choose PRE Plan
`),t()()(),n(109,"mat-card",17)(110,"mat-card-header")(111,"mat-card-title"),e(112,"MAINS Mastery"),t(),n(113,"mat-card-subtitle"),e(114,"Comprehensive Mains Preparation"),t()(),n(115,"mat-card-content")(116,"div",19)(117,"span",20),e(118,"\u20B9699"),t(),n(119,"span",21),e(120,"/month"),t()(),n(121,"ul",22)(122,"li")(123,"mat-icon"),e(124,"check"),t(),e(125," 200+ Mains Questions"),t(),n(126,"li")(127,"mat-icon"),e(128,"check"),t(),e(129," Essay Writing Practice"),t(),n(130,"li")(131,"mat-icon"),e(132,"check"),t(),e(133," Answer Evaluation"),t(),n(134,"li")(135,"mat-icon"),e(136,"check"),t(),e(137," Optional Subject Support"),t(),n(138,"li")(139,"mat-icon"),e(140,"check"),t(),e(141," Advanced Analytics"),t(),n(142,"li")(143,"mat-icon"),e(144,"check"),t(),e(145," Expert Feedback"),t(),n(146,"li")(147,"mat-icon"),e(148,"remove"),t(),e(149," Prelims Content"),t()()(),n(150,"mat-card-actions")(151,"button",24),_("click",function(){C(i);let s=p();return P(s.openPaymentDialog("mains"))}),e(152,` Choose MAINS Plan
`),t()()(),n(153,"mat-card",25)(154,"mat-card-header")(155,"div",26),e(156,"Best Value"),t(),n(157,"mat-card-title"),e(158,"COMBO Complete"),t(),n(159,"mat-card-subtitle"),e(160,"PRE + MAINS Full Preparation"),t()(),n(161,"mat-card-content")(162,"div",19)(163,"span",20),e(164,"\u20B9999"),t(),n(165,"span",21),e(166,"/month"),t(),n(167,"div",27),e(168,"Save \u20B9199"),t()(),n(169,"ul",22)(170,"li")(171,"mat-icon"),e(172,"check"),t(),e(173," All PRE + MAINS Features"),t(),n(174,"li")(175,"mat-icon"),e(176,"check"),t(),e(177," 1000+ Practice Questions"),t(),n(178,"li")(179,"mat-icon"),e(180,"check"),t(),e(181," 25+ Mock Tests"),t(),n(182,"li")(183,"mat-icon"),e(184,"check"),t(),e(185," Personal Mentor"),t(),n(186,"li")(187,"mat-icon"),e(188,"check"),t(),e(189," Priority Support"),t(),n(190,"li")(191,"mat-icon"),e(192,"check"),t(),e(193," Interview Guidance"),t(),n(194,"li")(195,"mat-icon"),e(196,"check"),t(),e(197," Study Plan Customization"),t()()(),n(198,"mat-card-actions")(199,"button",28),_("click",function(){C(i);let s=p();return P(s.openPaymentDialog("combo"))}),e(200,` Choose COMBO Plan
`),t()()()()(),n(201,"div",29)(202,"h2"),e(203,"Success Stories from Our Students"),t(),n(204,"div",30)(205,"mat-card",31)(206,"mat-card-content")(207,"div",32),e(208,` "ThinkCivil's PRE plan helped me clear prelims in my first attempt. The mock tests were exactly like the actual exam!" `),t(),n(209,"div",33)(210,"strong"),e(211,"- Rohan Sharma"),t(),n(212,"span"),e(213,"UPSC 2023 Selected"),t()()()(),n(214,"mat-card",31)(215,"mat-card-content")(216,"div",32),e(217,' "The COMBO plan was worth every penny. From prelims to mains, everything was covered systematically." '),t(),n(218,"div",33)(219,"strong"),e(220,"- Priya Singh"),t(),n(221,"span"),e(222,"IAS 2022"),t()()()(),n(223,"mat-card",31)(224,"mat-card-content")(225,"div",32),e(226,' "MAINS answer evaluation by experts transformed my writing skills. Scored 140+ in GS papers!" '),t(),n(227,"div",33)(228,"strong"),e(229,"- Amit Kumar"),t(),n(230,"span"),e(231,"IPS 2023"),t()()()()()(),n(232,"div",34)(233,"mat-card",35)(234,"mat-card-content")(235,"h2"),e(236,"Ready to Start Your UPSC Journey?"),t(),n(237,"p"),e(238,"Join thousands of successful aspirants. Choose your plan and begin your preparation today!"),t(),n(239,"div",36)(240,"button",37)(241,"mat-icon"),e(242,"shopping_cart"),t(),e(243," View All Plans "),t(),n(244,"button",38)(245,"mat-icon"),e(246,"help"),t(),e(247," Need Help Choosing? "),t()()()()()()}}function jt(o,a){if(o&1&&(n(0,"mat-card",41)(1,"mat-card-header")(2,"mat-card-title"),e(3,"Recent Performance"),t()(),n(4,"mat-card-content")(5,"h2"),e(6),t(),n(7,"p"),e(8),t()()()),o&2){let i=p(2);r(6),u(i.getRecentPerformance()),r(2),c("Based on last ",i.recentResults().length," tests")}}function Qt(o,a){if(o&1&&(n(0,"mat-card",49)(1,"mat-card-header")(2,"mat-card-title"),e(3),t(),n(4,"mat-card-subtitle"),e(5),t()(),n(6,"mat-card-content")(7,"p")(8,"strong"),e(9,"Rank:"),t(),e(10),t(),n(11,"p")(12,"strong"),e(13,"Submitted:"),t(),e(14),h(15,"date"),t()(),n(16,"mat-card-actions")(17,"button",50),e(18," View Details "),t()()()),o&2){let i=a.$implicit;r(3),u(i.test.title),r(2),W(" Score: ",i.score,"/",i.totalMarks," (",i.percentage,"%) "),r(5),q(" ",i.rank,"/",i.totalStudents,""),r(4),c(" ",b(15,9,i.submittedAt,"short"),""),r(3),m("routerLink",G(12,Yt,i._id))("queryParams",G(14,qt,i.test._id))}}function Wt(o,a){if(o&1&&(n(0,"div",46)(1,"h2"),e(2,"Recent Results"),t(),n(3,"div",47),g(4,Qt,19,16,"mat-card",48),t()()),o&2){let i=p(2);r(4),m("ngForOf",i.recentResults())}}function Ht(o,a){if(o&1&&(n(0,"mat-card",54)(1,"mat-card-header")(2,"mat-card-title"),e(3),t(),n(4,"mat-card-subtitle"),e(5),h(6,"date"),t()(),n(7,"mat-card-content")(8,"p")(9,"strong"),e(10,"Duration:"),t(),e(11),t(),n(12,"p")(13,"strong"),e(14,"Questions:"),t(),e(15),t()(),n(16,"mat-card-actions")(17,"button",55),e(18,"View All Tests"),t()()()),o&2){let i=a.$implicit;r(3),u(i.title),r(2),c(" Starts: ",b(6,4,i.startTime,"medium")," "),r(6),c(" ",i.duration," minutes"),r(4),c(" ",i.totalQuestions||(i.questions==null?null:i.questions.length)||0,"")}}function Jt(o,a){if(o&1&&(n(0,"div",51)(1,"h2"),e(2,"Upcoming Tests"),t(),n(3,"div",52),g(4,Ht,19,7,"mat-card",53),t()()),o&2){let i=p(2);r(4),m("ngForOf",i.upcomingTests())}}function $t(o,a){o&1&&(n(0,"div",56)(1,"mat-card")(2,"mat-card-content")(3,"h3"),e(4,"Welcome to ThinkCivil!"),t(),n(5,"p"),e(6,"You haven't taken any tests yet. Check the Live Tests section to get started!"),t(),n(7,"button",57),e(8," Browse Available Tests "),t()()()())}function Kt(o,a){if(o&1&&(n(0,"div",39)(1,"div",40)(2,"mat-card",41)(3,"mat-card-header")(4,"mat-card-title"),e(5,"Upcoming Tests"),t()(),n(6,"mat-card-content")(7,"h2"),e(8),t(),n(9,"p"),e(10,"Tests scheduled"),t()()(),n(11,"mat-card",41)(12,"mat-card-header")(13,"mat-card-title"),e(14,"Completed Tests"),t()(),n(15,"mat-card-content")(16,"h2"),e(17),t(),n(18,"p"),e(19,"Tests completed"),t()()(),g(20,jt,9,2,"mat-card",42),t(),g(21,Wt,5,1,"div",43)(22,Jt,5,1,"div",44)(23,$t,9,0,"div",45),t()),o&2){let i=p();r(8),u(i.upcomingTests().length),r(9),u(i.completedTestsCount()),r(3),m("ngIf",i.recentResults().length>0),r(),m("ngIf",i.recentResults().length>0),r(),m("ngIf",i.upcomingTests().length>0),r(),m("ngIf",i.upcomingTests().length===0&&i.completedTestsCount()===0)}}function Xt(o,a){if(o&1&&(n(0,"mat-card",54)(1,"mat-card-header")(2,"mat-card-title"),e(3),t(),n(4,"mat-card-subtitle"),e(5),h(6,"date"),t()(),n(7,"mat-card-content")(8,"p")(9,"strong"),e(10,"Questions:"),t(),e(11),t(),n(12,"p")(13,"strong"),e(14,"Duration:"),t(),e(15),t()(),n(16,"mat-card-actions")(17,"button",63),e(18,"Manage"),t()()()),o&2){let i=a.$implicit;r(3),u(i.title),r(2),c(" Starts: ",b(6,4,i.startTime,"medium")," "),r(6),c(" ",(i.questions==null?null:i.questions.length)||0,""),r(4),c(" ",i.duration," minutes")}}function Zt(o,a){if(o&1&&(n(0,"div",62)(1,"h2"),e(2,"Upcoming Tests"),t(),n(3,"div",52),g(4,Xt,19,7,"mat-card",53),t()()),o&2){let i=p(2);r(4),m("ngForOf",i.upcomingTests())}}function te(o,a){if(o&1){let i=Y();n(0,"div",58)(1,"div",40)(2,"mat-card",41)(3,"mat-card-header")(4,"mat-card-title"),e(5,"Total Tests"),t()(),n(6,"mat-card-content")(7,"h2"),e(8),t(),n(9,"p"),e(10,"Tests Created"),t()()(),n(11,"mat-card",59),_("click",function(){C(i);let s=p();return P(s.navigateToStudentsList())}),n(12,"mat-card-header")(13,"mat-card-title"),e(14,"Total Students"),t()(),n(15,"mat-card-content")(16,"h2"),e(17),t(),n(18,"p"),e(19,"Registered Students"),t(),n(20,"div",60)(21,"mat-icon"),e(22,"open_in_new"),t(),n(23,"span"),e(24,"Click to view all"),t()()()(),n(25,"mat-card",41)(26,"mat-card-header")(27,"mat-card-title"),e(28,"Total Results"),t()(),n(29,"mat-card-content")(30,"h2"),e(31),t(),n(32,"p"),e(33,"Tests Submitted"),t()()()(),g(34,Zt,5,1,"div",61),t()}if(o&2){let i=p();r(8),u(i.totalTestsCount()),r(9),u(i.totalStudentsCount()),r(14),u(i.totalResultsCount()),r(3),m("ngIf",i.upcomingTests().length>0)}}var Tt=class o{authService=d(k);testService=d(U);userService=d(wt);router=d(y);dialog=d(Pt);currentUser=this.authService.currentUser;upcomingTests=f([]);recentResults=f([]);completedTestsCount=f(0);totalTestsCount=f(0);totalStudentsCount=f(0);totalResultsCount=f(0);loading=f(!0);ngOnInit(){let a=this.currentUser();a?.role==="student"?a.type==="fresh"?this.loadFreshStudentData():a.type==="pre"&&this.loadPreStudentData():a?.role==="admin"&&this.loadAdminData()}openPaymentDialog(a){this.dialog.open(V,{width:"600px",maxWidth:"95vw",data:{selectedPlan:a},disableClose:!0}).afterClosed().subscribe(l=>{console.log(l?"Payment completed successfully":"Payment cancelled")})}loadFreshStudentData(){this.loading.set(!0),setTimeout(()=>{this.loading.set(!1)},1e3)}loadPreStudentData(){this.loading.set(!0),this.testService.getUpcomingTests().subscribe({next:a=>{this.upcomingTests.set(a.slice(0,3))},error:a=>{console.error("Error loading upcoming tests:",a)}}),this.testService.getStudentResults().subscribe({next:a=>{this.recentResults.set(a.slice(0,5)),this.completedTestsCount.set(a.length),this.loading.set(!1)},error:a=>{console.error("Error loading student results:",a),this.loading.set(!1)}})}loadAdminData(){this.loading.set(!0),this.testService.getPlatformStatistics().subscribe({next:a=>{this.totalStudentsCount.set(a.totalStudents),this.totalResultsCount.set(a.totalResults),this.totalTestsCount.set(a.totalTests),this.loading.set(!1)},error:a=>{console.error("Error loading platform statistics:",a),this.loadFallbackAdminData()}})}loadFallbackAdminData(){this.testService.getAllResults().subscribe({next:a=>{this.totalResultsCount.set(a.length),this.loading.set(!1)},error:a=>{console.error("Error loading results:",a),this.loading.set(!1)}})}getRecentPerformance(){let a=this.recentResults();return a.length===0?"No tests taken yet":`Average: ${(a.reduce((l,s)=>l+parseFloat(s.percentage),0)/a.length).toFixed(1)}%`}navigateToStudentsList(){this.router.navigate(["/students-list"])}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=M({type:o,selectors:[["app-dashboard"]],decls:11,vars:11,consts:[[1,"dashboard-container"],[1,"user-role"],["class","loading",4,"ngIf"],["class","fresh-student-dashboard",4,"ngIf"],["class","student-dashboard",4,"ngIf"],["class","admin-dashboard",4,"ngIf"],[1,"loading"],[1,"fresh-student-dashboard"],[1,"welcome-section"],[1,"welcome-card"],[1,"welcome-content"],[1,"motivation-text"],[1,"achievement-stats"],[1,"stat-item"],[1,"preview-features"],[1,"plans-section"],[1,"plans-grid"],[1,"plan-card"],[1,"plan-badge","pre-badge"],[1,"plan-price"],[1,"price"],[1,"duration"],[1,"plan-features"],["mat-raised-button","","color","primary",1,"plan-button",3,"click"],["mat-raised-button","","color","accent",1,"plan-button",3,"click"],[1,"plan-card","featured"],[1,"plan-badge","combo-badge"],[1,"savings"],["mat-raised-button","","color","warn",1,"plan-button",3,"click"],[1,"testimonials-section"],[1,"testimonials-grid"],[1,"testimonial-card"],[1,"testimonial-text"],[1,"testimonial-author"],[1,"final-cta"],[1,"cta-card"],[1,"cta-buttons"],["mat-raised-button","","color","primary","size","large"],["mat-stroked-button","","color","primary","size","large"],[1,"student-dashboard"],[1,"stats-grid"],[1,"stat-card"],["class","stat-card",4,"ngIf"],["class","recent-results",4,"ngIf"],["class","upcoming-tests",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"recent-results"],[1,"results-grid"],["class","result-card",4,"ngFor","ngForOf"],[1,"result-card"],["mat-button","","color","primary",3,"routerLink","queryParams"],[1,"upcoming-tests"],[1,"tests-grid"],["class","test-card",4,"ngFor","ngForOf"],[1,"test-card"],["mat-button","","color","primary","routerLink","/live-tests"],[1,"empty-state"],["mat-raised-button","","color","primary","routerLink","/live-tests"],[1,"admin-dashboard"],[1,"stat-card","clickable-card",3,"click"],[1,"click-hint"],["class","quick-stats",4,"ngIf"],[1,"quick-stats"],["mat-button","","color","primary","routerLink","/manage-tests"]],template:function(i,l){if(i&1&&(n(0,"div",0)(1,"h1"),e(2),t(),n(3,"p",1),e(4),h(5,"titlecase"),h(6,"titlecase"),t(),g(7,Gt,3,0,"div",2)(8,Lt,248,0,"div",3)(9,Kt,24,6,"div",4)(10,te,35,4,"div",5),t()),i&2){let s,x,v,S,j;r(2),c("Welcome, ",(s=l.currentUser())==null?null:s.fullName,"!"),r(2),q("Role: ",L(5,7,(x=l.currentUser())==null?null:x.role)," - ",L(6,9,(x=l.currentUser())==null?null:x.type),""),r(3),m("ngIf",l.loading()),r(),m("ngIf",!l.loading()&&((v=l.currentUser())==null?null:v.role)==="student"&&((v=l.currentUser())==null?null:v.type)==="fresh"),r(),m("ngIf",!l.loading()&&((S=l.currentUser())==null?null:S.role)==="student"&&((S=l.currentUser())==null?null:S.type)==="pre"),r(),m("ngIf",!l.loading()&&((j=l.currentUser())==null?null:j.role)==="admin")}},dependencies:[O,H,E,J,$,A,T,mt,D,F,lt,I,B,R,N,z,K],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px}.user-role[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{text-align:center;padding:20px;transition:transform .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.stat-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5em;margin:10px 0;color:#3f51b5}.admin-actions[_ngcontent-%COMP%]{max-width:600px;margin:30px auto}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:20px;flex-wrap:wrap}.upcoming-tests[_ngcontent-%COMP%], .recent-results[_ngcontent-%COMP%], .quick-stats[_ngcontent-%COMP%]{margin-top:30px}.tests-grid[_ngcontent-%COMP%], .results-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:20px}.test-card[_ngcontent-%COMP%], .result-card[_ngcontent-%COMP%]{transition:transform .2s}.test-card[_ngcontent-%COMP%]:hover, .result-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;max-width:500px;margin:40px auto}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#3f51b5;margin-bottom:15px}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:10px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.tests-grid[_ngcontent-%COMP%], .results-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.clickable-card[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;position:relative}.clickable-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 8px #00000026;background:#f8f9fa}.click-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;margin-top:10px;font-size:.8em;color:#666}.click-hint[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.fresh-student-dashboard[_ngcontent-%COMP%]{padding:20px 0}.welcome-section[_ngcontent-%COMP%]{margin-bottom:40px}.welcome-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:16px}.welcome-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:40px;padding:20px 0}.motivation-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1.8em;line-height:1.3}.motivation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 25px;font-size:1.1em;line-height:1.6;opacity:.9}.achievement-stats[_ngcontent-%COMP%]{display:flex;gap:30px;margin-top:25px}.stat-item[_ngcontent-%COMP%]{text-align:center}.stat-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:2em;margin-bottom:5px}.stat-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9em;opacity:.8}.preview-features[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 15px;font-size:1.2em}.preview-features[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.preview-features[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;font-size:.95em}.preview-features[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:10px;font-size:18px;width:18px;height:18px;color:#4caf50}.cta-button[_ngcontent-%COMP%]{font-size:1.1em;padding:12px 24px}.plans-section[_ngcontent-%COMP%]{margin:60px 0;text-align:center}.plans-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2em;margin-bottom:40px;color:#333}.plans-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px;margin-top:30px}.plan-card[_ngcontent-%COMP%]{border-radius:12px;transition:transform .3s ease,box-shadow .3s ease;position:relative;overflow:visible}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #0000001a}.plan-card.featured[_ngcontent-%COMP%]{border:2px solid #ff4081;transform:scale(1.05)}.plan-card.featured[_ngcontent-%COMP%]:hover{transform:scale(1.05) translateY(-5px)}.plan-badge[_ngcontent-%COMP%]{position:absolute;top:-10px;left:50%;transform:translate(-50%);padding:6px 16px;border-radius:20px;font-size:.8em;font-weight:700;color:#fff}.pre-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2)}.combo-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff4081,#f50057)}.plan-price[_ngcontent-%COMP%]{text-align:center;margin:20px 0}.price[_ngcontent-%COMP%]{font-size:2.5em;font-weight:700;color:#333}.duration[_ngcontent-%COMP%]{font-size:1em;color:#666}.savings[_ngcontent-%COMP%]{color:#4caf50;font-weight:700;margin-top:5px}.plan-features[_ngcontent-%COMP%]{list-style:none;padding:0;margin:20px 0;text-align:left}.plan-features[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:12px;padding:8px 0}.plan-features[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:12px;font-size:18px;width:18px;height:18px}.plan-features[_ngcontent-%COMP%]   mat-icon.check[_ngcontent-%COMP%]{color:#4caf50}.plan-features[_ngcontent-%COMP%]   mat-icon.remove[_ngcontent-%COMP%]{color:#f44336}.plan-button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:1.1em}.preview-section[_ngcontent-%COMP%]{margin:60px 0;text-align:center}.preview-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2em;margin-bottom:40px;color:#333}.preview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:25px}.preview-card[_ngcontent-%COMP%]{text-align:center;padding:30px 20px;transition:transform .3s ease}.preview-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.preview-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:20px;color:#2196f3}.preview-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#333}.preview-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;color:#666;line-height:1.5}.testimonials-section[_ngcontent-%COMP%]{margin:60px 0;text-align:center}.testimonials-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2em;margin-bottom:40px;color:#333}.testimonials-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px}.testimonial-card[_ngcontent-%COMP%]{padding:25px;text-align:left}.testimonial-text[_ngcontent-%COMP%]{font-style:italic;font-size:1.1em;line-height:1.6;margin-bottom:20px;color:#555}.testimonial-author[_ngcontent-%COMP%]{border-top:1px solid #eee;padding-top:15px}.testimonial-author[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#333;margin-bottom:5px}.testimonial-author[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:.9em}.final-cta[_ngcontent-%COMP%]{margin:60px 0 30px}.cta-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;text-align:center;padding:40px;border-radius:16px}.cta-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2em;margin:0 0 15px}.cta-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;margin:0 0 30px;opacity:.9}.cta-buttons[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;flex-wrap:wrap}.cta-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.1em;padding:12px 24px}@media (max-width: 768px){.welcome-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:25px}.achievement-stats[_ngcontent-%COMP%]{justify-content:space-around}.plans-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.plan-card.featured[_ngcontent-%COMP%]{transform:none}.plan-card.featured[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.preview-grid[_ngcontent-%COMP%], .testimonials-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.cta-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.cta-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;max-width:300px}}@media (max-width: 480px){.achievement-stats[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.motivation-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}.plans-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .preview-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .testimonials-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em}}"]})};export{Tt as DashboardComponent};
