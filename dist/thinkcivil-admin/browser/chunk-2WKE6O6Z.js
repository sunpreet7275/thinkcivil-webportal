import{a as K,b as Q,c as X,d as Y,e as tt,f as et,g as nt,h as it,i as at,j as ot,k as rt}from"./chunk-T4LTT3C7.js";import{a as z,b as q}from"./chunk-KLEPB37Q.js";import"./chunk-7RWCIHFI.js";import{a as G}from"./chunk-QBWFBDUQ.js";import{a as F,b as W}from"./chunk-BFQVRRBQ.js";import"./chunk-7G2NQBXL.js";import{a as N,b as B,c as A,f as j,g as V}from"./chunk-Y4AHRI4W.js";import{a as U,b as Z}from"./chunk-XMRX5FRA.js";import{d as R}from"./chunk-GRH6IN53.js";import{K as $,L as H,N as J}from"./chunk-7XSJTIVU.js";import"./chunk-ZWY6WOSF.js";import{Db as m,Ec as L,Ha as w,Mb as i,Nb as a,Ob as h,Pb as u,Pc as P,Qb as p,Sb as b,Tc as O,Ub as f,Vb as g,Vc as I,ec as o,fb as s,fc as y,gc as v,ja as C,qc as k,ra as S,rb as D,sa as x,sc as T,xb as d}from"./chunk-SZ6SDWKT.js";function dt(t,e){if(t&1){let n=b();i(0,"button",8),f("click",function(){S(n);let l=g();return x(l.exportStudents())}),i(1,"mat-icon"),o(2,"download"),a(),o(3," Export CSV "),a()}}function mt(t,e){t&1&&(i(0,"div",9),h(1,"mat-spinner"),i(2,"p"),o(3,"Loading students..."),a()())}function ct(t,e){t&1&&(i(0,"th",24),o(1,"Name"),a())}function ut(t,e){if(t&1&&(i(0,"td",25)(1,"div",26)(2,"strong"),o(3),a()()()),t&2){let n=e.$implicit;s(3),y(n.fullName)}}function pt(t,e){t&1&&(i(0,"th",24),o(1,"Email"),a())}function _t(t,e){if(t&1&&(i(0,"td",25),o(1),a()),t&2){let n=e.$implicit;s(),v(" ",n.email," ")}}function ft(t,e){t&1&&(i(0,"th",24),o(1,"Phone"),a())}function gt(t,e){if(t&1&&(i(0,"td",25),o(1),a()),t&2){let n=e.$implicit;s(),v(" ",n.phone," ")}}function Ct(t,e){t&1&&(i(0,"th",24),o(1,"Joined Date"),a())}function St(t,e){if(t&1&&(i(0,"td",25),o(1),k(2,"date"),a()),t&2){let n=e.$implicit;s(),v(" ",T(2,1,n.createdAt,"mediumDate")," ")}}function xt(t,e){t&1&&(i(0,"th",24),o(1,"Actions"),a())}function ht(t,e){if(t&1){let n=b();i(0,"td",25)(1,"button",27),f("click",function(){let l=S(n).$implicit,_=g(2);return x(_.viewStudentResults(l._id))}),i(2,"mat-icon"),o(3,"visibility"),a(),o(4," View Results "),a(),i(5,"button",28),f("click",function(){let l=S(n).$implicit,_=g(2);return x(_.deleteStudent(l._id,l.fullName))}),i(6,"mat-icon"),o(7,"delete"),a(),o(8," Delete "),a()()}}function vt(t,e){t&1&&h(0,"tr",29)}function Mt(t,e){t&1&&h(0,"tr",30)}function wt(t,e){if(t&1&&(i(0,"div",10)(1,"mat-card")(2,"mat-card-content")(3,"table",11),u(4,12),d(5,ct,2,0,"th",13)(6,ut,4,1,"td",14),p(),u(7,15),d(8,pt,2,0,"th",13)(9,_t,2,1,"td",14),p(),u(10,16),d(11,ft,2,0,"th",13)(12,gt,2,1,"td",14),p(),u(13,17),d(14,Ct,2,0,"th",13)(15,St,3,4,"td",14),p(),u(16,18),d(17,xt,2,0,"th",13)(18,ht,9,0,"td",14),p(),d(19,vt,1,0,"tr",19)(20,Mt,1,0,"tr",20),a()()(),i(21,"mat-card",21)(22,"mat-card-header")(23,"mat-card-title"),o(24,"Summary"),a()(),i(25,"mat-card-content")(26,"div",22)(27,"div",23)(28,"h3"),o(29),a(),i(30,"p"),o(31,"Total Students"),a()()()()()()),t&2){let n=g();s(3),m("dataSource",n.students()),s(16),m("matHeaderRowDef",n.displayedColumns),s(),m("matRowDefColumns",n.displayedColumns),s(9),y(n.students().length)}}function bt(t,e){t&1&&(i(0,"div",31)(1,"mat-card")(2,"mat-card-content")(3,"p"),o(4,"No students found."),a(),i(5,"p"),o(6,"Students will appear here once they register."),a()()()())}var st=class t{router=C(R);snackBar=C(z);userService=C(G);students=w([]);loading=w(!0);displayedColumns=["fullName","email","phone","joinedDate","actions"];recentStudentsCount=L(()=>{let e=new Date;return e.setMonth(e.getMonth()-1),this.students().filter(n=>new Date(n.createdAt)>e).length});mockStudents=[{_id:"1",fullName:"John Doe",email:"john@example.com",phone:"1234567890",role:"student",createdAt:"2024-01-15T10:30:00.000Z"},{_id:"2",fullName:"Jane Smith",email:"jane@example.com",phone:"0987654321",role:"student",createdAt:"2024-01-20T14:45:00.000Z"},{_id:"3",fullName:"Mike Johnson",email:"mike@example.com",phone:"5551234567",role:"student",createdAt:"2024-02-01T09:15:00.000Z"},{_id:"4",fullName:"Sarah Wilson",email:"sarah@example.com",phone:"4445556666",role:"student",createdAt:"2024-03-10T11:20:00.000Z"}];ngOnInit(){this.loadStudents()}loadStudents(){this.loading.set(!0),this.userService.getAllStudents().subscribe({next:e=>{this.students.set(e),this.loading.set(!1)},error:e=>{console.error("Error loading students:",e),this.snackBar.open("Error loading students","Close",{duration:3e3}),this.loading.set(!1)}})}goBack(){this.router.navigate(["/dashboard"])}viewStudentResults(e){this.router.navigate(["/prelims-results"],{queryParams:{studentId:e}})}exportStudents(){let e=this.students();if(e.length===0)return;let n=["Name","Email","Phone","Joined Date"],r=e.map(c=>[c.fullName,c.email,c.phone,new Date(c.createdAt).toLocaleDateString()]),l=[n,...r].map(c=>c.map(lt=>`"${lt}"`).join(",")).join(`
`),_=new Blob([l],{type:"text/csv"}),E=window.URL.createObjectURL(_),M=document.createElement("a");M.href=E,M.download=`students-list-${new Date().toISOString().split("T")[0]}.csv`,M.click(),window.URL.revokeObjectURL(E),this.snackBar.open("Students list exported successfully","Close",{duration:3e3})}deleteStudent(e,n){confirm(`Are you sure you want to delete ${n}? This action cannot be undone.`)&&this.userService.deleteStudent(e).subscribe({next:()=>{this.students.set(this.students().filter(r=>r._id!==e)),this.snackBar.open(`Student "${n}" deleted successfully`,"Close",{duration:3e3})},error:r=>{console.error("Error deleting student:",r),this.snackBar.open("Error deleting student","Close",{duration:3e3})}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=D({type:t,selectors:[["app-students-list"]],decls:15,vars:4,consts:[[1,"students-list-container"],[1,"header"],[1,"header-content"],["mat-icon-button","",1,"back-button",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["class","students-content",4,"ngIf"],["class","no-students",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"loading"],[1,"students-content"],["mat-table","",1,"students-table",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","joinedDate"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"summary-card"],[1,"summary-stats"],[1,"summary-item"],["mat-header-cell",""],["mat-cell",""],[1,"student-name"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-students"]],template:function(n,r){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),f("click",function(){return r.goBack()}),i(4,"mat-icon"),o(5,"arrow_back"),a()(),i(6,"div")(7,"h1"),o(8,"All Students"),a(),i(9,"p"),o(10,"Manage and view all registered students"),a()()(),d(11,dt,4,0,"button",4),a(),d(12,mt,4,0,"div",5)(13,wt,32,4,"div",6)(14,bt,7,0,"div",7),a()),n&2&&(s(11),m("ngIf",r.students().length>0),s(),m("ngIf",r.loading()),s(),m("ngIf",!r.loading()&&r.students().length>0),s(),m("ngIf",!r.loading()&&r.students().length===0))},dependencies:[I,P,O,V,N,A,j,B,rt,K,X,nt,Y,Q,it,tt,et,at,ot,J,H,$,W,F,Z,U,q],styles:[".students-list-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;flex-wrap:wrap;gap:15px}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#3f51b5}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;gap:20px}.students-table[_ngcontent-%COMP%]{width:100%}.student-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.summary-card[_ngcontent-%COMP%]{margin-top:20px}.summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px}.summary-item[_ngcontent-%COMP%]{text-align:center;padding:15px;background:#f5f5f5;border-radius:8px}.summary-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.8em;color:#3f51b5}.summary-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666}.no-students[_ngcontent-%COMP%]{text-align:center;padding:40px}@media (max-width: 768px){.students-list-container[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.students-table[_ngcontent-%COMP%]{font-size:.8em}.summary-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{st as StudentsListComponent};
