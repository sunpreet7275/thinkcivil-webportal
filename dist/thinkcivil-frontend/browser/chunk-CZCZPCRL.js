import{a as L}from"./chunk-S63R4J5X.js";import{b as E,d as _,f as w,g as I,l as k,o as N,r as z,w as G,y as V}from"./chunk-32HIGO4K.js";import"./chunk-VR4E7QUQ.js";import{$c as S,Fb as g,Hb as v,Ib as T,Ob as i,Pb as o,Qb as p,Ub as O,Uc as P,Vc as y,Wb as f,Xb as m,gb as r,gc as s,hc as C,ic as u,lb as h,ld as F,qa as x,ra as b,sb as M,yb as c}from"./chunk-66BASCB4.js";function A(n,t){if(n&1&&(i(0,"div",20),s(1),o()),n&2){let e=m();T(e.messageType),r(),u(" ",e.message," ")}}function j(n,t){n&1&&(i(0,"div",21),p(1,"div",22),i(2,"p"),s(3,"Loading tags..."),o()())}function $(n,t){n&1&&(i(0,"span"),s(1,"Tag name is required"),o())}function q(n,t){n&1&&(i(0,"span"),s(1,"Tag must be at least 2 characters long"),o())}function B(n,t){n&1&&(i(0,"span"),s(1,"Tag cannot exceed 50 characters"),o())}function H(n,t){if(n&1&&(i(0,"div",23),c(1,$,2,0,"span",13)(2,q,2,0,"span",13)(3,B,2,0,"span",13),o()),n&2){let e,a,d,l=m();r(),g("ngIf",(e=l.tagForm.get("tag"))==null||e.errors==null?null:e.errors.required),r(),g("ngIf",(a=l.tagForm.get("tag"))==null||a.errors==null?null:a.errors.minlength),r(),g("ngIf",(d=l.tagForm.get("tag"))==null||d.errors==null?null:d.errors.maxlength)}}function U(n,t){if(n&1&&(i(0,"span"),s(1),o()),n&2){let e=m();r(),u("",e.editingTag?"Update":"Create"," Tag")}}function R(n,t){n&1&&(i(0,"span"),s(1,"Processing..."),o())}function Y(n,t){n&1&&(i(0,"div",24),p(1,"i",25),i(2,"p"),s(3,"No tags found. Create your first tag!"),o()())}function J(n,t){if(n&1){let e=O();i(0,"tr")(1,"td",28)(2,"span",29),s(3),o()(),i(4,"td",30)(5,"button",31),f("click",function(){let d=x(e).$implicit,l=m(2);return b(l.editTag(d))}),p(6,"i",32),s(7," Edit "),o(),i(8,"button",33),f("click",function(){let d=x(e).$implicit,l=m(2);return b(l.deleteTag(d))}),p(9,"i",34),s(10," Delete "),o()()()}if(n&2){let e=t.$implicit;r(3),C(e.tag)}}function K(n,t){if(n&1&&(i(0,"div",26)(1,"table")(2,"thead")(3,"tr")(4,"th"),s(5,"Tag Name"),o(),i(6,"th"),s(7,"Actions"),o()()(),i(8,"tbody"),c(9,J,11,1,"tr",27),o()()()),n&2){let e=m();r(9),g("ngForOf",e.tags)}}var D=class n{constructor(t,e){this.fb=t;this.tagService=e;this.tagForm=this.createForm()}tagForm;tags=[];isLoading=!1;isSubmitting=!1;message="";messageType="success";editingTag=null;ngOnInit(){this.loadTags()}createForm(){return this.fb.group({tag:["",[_.required,_.minLength(2),_.maxLength(50)]]})}loadTags(){this.isLoading=!0,this.tagService.getTags().subscribe({next:t=>{this.tags=t,this.isLoading=!1},error:t=>{console.error("Error loading tags:",t),this.showMessage("Error loading tags","error"),this.isLoading=!1}})}onSubmit(){if(this.tagForm.valid){this.isSubmitting=!0;let t=this.tagForm.get("tag")?.value;this.editingTag?this.tagService.updateTag(this.editingTag._id,t).subscribe({next:e=>{this.showMessage("Tag updated successfully!","success"),this.loadTags(),this.resetForm(),this.isSubmitting=!1},error:e=>{console.error("Error updating tag:",e),this.showMessage("Error updating tag","error"),this.isSubmitting=!1}}):this.tagService.createTag(t).subscribe({next:e=>{this.showMessage("Tag created successfully!","success"),this.loadTags(),this.resetForm(),this.isSubmitting=!1},error:e=>{console.error("Error creating tag:",e),this.showMessage("Error creating tag","error"),this.isSubmitting=!1}})}else this.markFormGroupTouched(),this.showMessage("Please fill the form correctly","error")}editTag(t){this.editingTag=t,this.tagForm.patchValue({tag:t.tag})}deleteTag(t){confirm(`Are you sure you want to delete the tag "${t.tag}"?`)&&this.tagService.deleteTag(t._id).subscribe({next:e=>{this.showMessage("Tag deleted successfully!","success"),this.loadTags()},error:e=>{console.error("Error deleting tag:",e),this.showMessage("Error deleting tag","error")}})}resetForm(){this.tagForm.reset(),this.editingTag=null}markFormGroupTouched(){Object.keys(this.tagForm.controls).forEach(t=>{this.tagForm.get(t)?.markAsTouched()})}showMessage(t,e){this.message=t,this.messageType=e,setTimeout(()=>{this.message=""},5e3)}isFieldInvalid(t){let e=this.tagForm.get(t);return!!(e&&e.invalid&&e.touched)}static \u0275fac=function(e){return new(e||n)(h(G),h(L))};static \u0275cmp=M({type:n,selectors:[["app-tag-master"]],decls:32,vars:14,consts:[[1,"tag-management"],[1,"header"],["class","message",3,"class",4,"ngIf"],["class","loading",4,"ngIf"],[1,"management-container"],[1,"form-section"],[1,"tag-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","tagName"],["type","text","id","tagName","formControlName","tag","placeholder","Enter tag name (e.g., History, Geography)",1,"form-control"],["class","error-message",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"listing-section"],[1,"section-header"],[1,"tag-count"],["class","empty-state",4,"ngIf"],["class","tags-table",4,"ngIf"],[1,"message"],[1,"loading"],[1,"spinner"],[1,"error-message"],[1,"empty-state"],[1,"fa","fa-tags"],[1,"tags-table"],[4,"ngFor","ngForOf"],[1,"tag-name"],[1,"tag-badge"],[1,"actions"],["title","Edit tag",1,"btn-edit",3,"click"],[1,"fa","fa-edit"],["title","Delete tag",1,"btn-delete",3,"click"],[1,"fa","fa-trash"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Tag Management"),o(),i(4,"p"),s(5,"Create, edit, and manage tags for your content"),o()(),c(6,A,2,3,"div",2)(7,j,4,0,"div",3),i(8,"div",4)(9,"div",5)(10,"h3"),s(11),o(),i(12,"form",6),f("ngSubmit",function(){return a.onSubmit()}),i(13,"div",7)(14,"label",8),s(15,"Tag Name *"),o(),p(16,"input",9),c(17,H,4,3,"div",10),o(),i(18,"div",11)(19,"button",12),c(20,U,2,1,"span",13)(21,R,2,0,"span",13),o(),i(22,"button",14),f("click",function(){return a.resetForm()}),s(23," Cancel "),o()()()(),i(24,"div",15)(25,"div",16)(26,"h3"),s(27,"All Tags"),o(),i(28,"span",17),s(29),o()(),c(30,Y,4,0,"div",18)(31,K,10,1,"div",19),o()()()),e&2&&(r(6),g("ngIf",a.message),r(),g("ngIf",a.isLoading),r(4),C(a.editingTag?"Edit Tag":"Create New Tag"),r(),g("formGroup",a.tagForm),r(4),v("error",a.isFieldInvalid("tag")),r(),g("ngIf",a.isFieldInvalid("tag")),r(2),g("disabled",a.isSubmitting||a.tagForm.invalid),r(),g("ngIf",!a.isSubmitting),r(),g("ngIf",a.isSubmitting),r(),g("disabled",a.isSubmitting),r(7),u("",a.tags.length," tag(s)"),r(),g("ngIf",a.tags.length===0&&!a.isLoading),r(),g("ngIf",a.tags.length>0))},dependencies:[S,P,y,V,k,E,w,I,N,z,F],styles:[".tag-management[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:25px;border-radius:10px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:2rem}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;opacity:.9;font-size:1rem}.message[_ngcontent-%COMP%]{padding:12px 15px;border-radius:6px;margin-bottom:20px;font-weight:500}.message.success[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46;border:1px solid #a7f3d0}.message.error[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;border:1px solid #fecaca}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#6b7280}.spinner[_ngcontent-%COMP%]{border:3px solid #f3f4f6;border-left:3px solid #667eea;border-radius:50%;width:30px;height:30px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 15px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.management-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:30px;margin-top:30px}@media (max-width: 968px){.management-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}}.form-section[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:10px;box-shadow:0 2px 10px #0000001a;border:1px solid #e5e7eb}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#374151;border-bottom:2px solid #667eea;padding-bottom:10px;font-size:1.3rem}.tag-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px;color:#374151;font-size:.9rem}.form-control[_ngcontent-%COMP%]{padding:12px 15px;border:2px solid #e5e7eb;border-radius:6px;font-size:14px;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control.error[_ngcontent-%COMP%]{border-color:#dc2626}.error-message[_ngcontent-%COMP%]{color:#dc2626;font-size:12px;margin-top:5px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:10px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:14px;flex:1}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a6fd8;transform:translateY(-1px)}.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#4b5563}.listing-section[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:10px;box-shadow:0 2px 10px #0000001a;border:1px solid #e5e7eb}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #e5e7eb}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#374151;font-size:1.3rem}.tag-count[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:4px 12px;border-radius:15px;font-size:12px;font-weight:600}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:15px;opacity:.5}.tags-table[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]{background:#f8fafc}th[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;font-weight:600;color:#374151;border-bottom:2px solid #e5e7eb}td[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid #e5e7eb}.tag-name[_ngcontent-%COMP%]{font-weight:500}.tag-badge[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;padding:6px 12px;border-radius:20px;font-size:14px;font-weight:500}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn-edit[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#2563eb}.btn-delete[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#dc2626}@media (max-width: 768px){.management-container[_ngcontent-%COMP%]{gap:20px}.form-section[_ngcontent-%COMP%], .listing-section[_ngcontent-%COMP%]{padding:20px}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:8px 12px;font-size:11px}.form-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{D as TagMasterComponent};
