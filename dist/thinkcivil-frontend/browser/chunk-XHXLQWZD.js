import{a as A}from"./chunk-QU5U3TZY.js";import{a as S,b as D}from"./chunk-LPFJRQG6.js";import{$c as w,Fb as f,Hb as P,Ob as i,Pb as o,Qb as d,Ub as x,Uc as O,Vc as M,Wb as g,Xb as l,gb as c,gc as p,hc as _,ic as y,lb as b,ld as k,qa as u,ra as h,sb as v,yb as m}from"./chunk-66BASCB4.js";function j(r,e){r&1&&d(0,"i",18)}function T(r,e){r&1&&(i(0,"span",19),d(1,"i",20),o())}function E(r,e){if(r&1){let t=x();i(0,"span",15),g("click",function(){let a=u(t).index,s=l();return h(s.navigateBreadcrumb(a))}),m(1,j,1,0,"i",16),p(2),m(3,T,2,0,"span",17),o()}if(r&2){let t=e.$implicit,n=e.index,a=l();P("active",n===a.breadcrumbs.length-1),c(),f("ngIf",n===0),c(),y(" ",t.name," "),c(),f("ngIf",n<a.breadcrumbs.length-1)}}function V(r,e){r&1&&(i(0,"div",21)(1,"div",22),d(2,"i",23),o(),i(3,"h3"),p(4,"Empty Folder"),o(),i(5,"p"),p(6,"This folder doesn't contain any items"),o()())}function R(r,e){if(r&1){let t=x();i(0,"div",27),g("click",function(){u(t);let a=l().$implicit,s=l();return h(s.navigateToFolder(a))}),i(1,"div",28),d(2,"i",18)(3,"i",29),o(),i(4,"div",30)(5,"span",31),p(6),o(),i(7,"span",32),p(8),o()(),i(9,"div",33),d(10,"i",20),o()()}if(r&2){let t=l().$implicit,n=l();c(6),_(n.formatItemName(t)),c(2),y("Folder \u2022 ",n.countItems(n.currentData[t],t)," items")}}function N(r,e){if(r&1){let t=x();i(0,"div",34),g("click",function(){u(t);let a=l().$implicit,s=l();return h(s.openFile(s.currentData[a].fileLink))}),i(1,"div",35)(2,"i",36),p(3,"picture_as_pdf"),o()(),i(4,"div",30)(5,"span",31),p(6),o(),i(7,"span",37),p(8),o()(),i(9,"div",38),d(10,"i",39),o()()}if(r&2){let t=l().$implicit,n=l();c(6),_(n.currentData[t].fileName||n.formatItemName(t)),c(2),_(n.currentData[t].description||"PDF Document")}}function F(r,e){if(r&1&&(i(0,"div",24),m(1,R,11,2,"div",25)(2,N,11,2,"div",26),o()),r&2){let t=e.$implicit,n=l();c(),f("ngIf",n.isFolder(n.currentData[t])),c(),f("ngIf",!n.isFolder(n.currentData[t]))}}var I=class r{constructor(e,t,n){this.dialogRef=e;this.data=t;this.adminService=n}syllabusType="";currentData={};breadcrumbs=[];currentPath=[];isLoading=!1;originalApiData={};ngOnInit(){this.syllabusType=this.data.type,this.currentPath=[this.syllabusType],this.loadData(),this.updateBreadcrumbs()}loadData(){if(this.isLoading=!0,this.currentPath.length===1)this.adminService.getSyllabus(this.syllabusType).subscribe({next:e=>{this.originalApiData=e,this.currentData=this.transformApiData(e,this.syllabusType),this.isLoading=!1},error:e=>{console.error(`Error loading ${this.syllabusType} syllabus data:`,e),this.currentData=this.syllabusData[this.syllabusType]||{},this.isLoading=!1}});else{let e=this.originalApiData;if(this.syllabusType==="mains"&&this.currentPath[1]==="Optional")e=this.getMainsOptionalData(this.currentPath);else for(let t=1;t<this.currentPath.length;t++)if(e&&e[this.currentPath[t]])e=e[this.currentPath[t]];else{e={};break}this.currentData=e,this.isLoading=!1}}getMainsOptionalData(e){if(e.length===2){let t={};return this.originalApiData.optionalSubjects&&Array.isArray(this.originalApiData.optionalSubjects)&&this.originalApiData.optionalSubjects.forEach(n=>{n.subjectName&&(t[n.subjectName]={_isFolder:!0,_documents:n.documents||[]})}),t}else if(e.length===3){let t=e[2],n={};if(this.originalApiData.optionalSubjects&&Array.isArray(this.originalApiData.optionalSubjects)){let a=this.originalApiData.optionalSubjects.find(s=>s.subjectName.toLowerCase()===t.toLowerCase());a&&a.documents&&a.documents.forEach((s,C)=>{n[C]={fileLink:s.fileLink,fileName:s.fileName,description:s.description}})}return n}return{}}transformApiData(e,t){return e?t==="prelims"?e:t==="mains"?this.transformMainsData(e):e:{}}transformMainsData(e){if(!e)return{};let t={};return["gs1","gs2","gs3","gs4","essay"].forEach(n=>{e[n]&&(t[n]=e[n])}),e.optionalSubjects&&Array.isArray(e.optionalSubjects)&&e.optionalSubjects.length>0&&(t.Optional={_isFolder:!0,_description:"Optional Subjects",_itemCount:e.optionalSubjects.length}),t}updateBreadcrumbs(){this.breadcrumbs=this.currentPath.map((e,t)=>{let n=this.currentPath.slice(0,t+1);return{name:this.formatName(e),path:n.join("/")}})}formatName(e){return e.match(/^gs[1-4]$/i)?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)}isFolder(e){return e&&typeof e=="object"&&(e._isFolder||!e.fileLink)}navigateToFolder(e){this.currentPath.push(e),this.loadData(),this.updateBreadcrumbs()}navigateBreadcrumb(e){this.currentPath=this.currentPath.slice(0,e+1),this.loadData(),this.updateBreadcrumbs()}openFile(e){e&&window.open(e,"_blank")}goBack(){this.currentPath.length>1?(this.currentPath.pop(),this.loadData(),this.updateBreadcrumbs()):this.dialogRef.close()}closeDialog(){this.dialogRef.close()}getObjectKeys(e){return e?Object.keys(e).filter(t=>!t.startsWith("_")):[]}formatItemName(e){return isNaN(Number(e))?e.replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/^./,t=>t.toUpperCase()).trim():`Document ${Number(e)+1}`}countItems(e,t){if(!e)return 0;if(this.syllabusType==="mains"){if(t==="Optional"&&e._itemCount)return e._itemCount;if(e._documents&&Array.isArray(e._documents))return e._documents.length;if(this.currentPath.length===2&&this.currentPath[1]==="Optional"&&this.originalApiData.optionalSubjects&&Array.isArray(this.originalApiData.optionalSubjects))return this.originalApiData.optionalSubjects.length;if(this.currentPath.length===3&&this.currentPath[1]==="Optional"){let a=this.currentPath[2];if(this.originalApiData.optionalSubjects&&Array.isArray(this.originalApiData.optionalSubjects)){let s=this.originalApiData.optionalSubjects.find(C=>C.subjectName.toLowerCase()===a.toLowerCase());return s&&s.documents?s.documents.length:0}}}let n=Object.keys(e).filter(a=>!a.startsWith("_"));return e.fileLink?1:n.length}syllabusData={};static \u0275fac=function(t){return new(t||r)(b(S),b(D),b(A))};static \u0275cmp=v({type:r,selectors:[["app-resources-view"]],decls:19,vars:4,consts:[[1,"syllabus-viewer"],[1,"explorer-header"],[1,"back-button",3,"click"],[1,"fa","fa-chevron-left"],[1,"header-content"],[1,"fa","fa-graduation-cap","header-icon"],[1,"breadcrumb"],[1,"breadcrumb-container"],[1,"breadcrumb-home",3,"click"],[1,"fa","fa-home"],["class","breadcrumb-item",3,"active","click",4,"ngFor","ngForOf"],[1,"explorer-window"],[1,"content-pane"],["class","empty-folder",4,"ngIf"],["class","explorer-item",4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"click"],["class","fa fa-folder",4,"ngIf"],["class","separator",4,"ngIf"],[1,"fa","fa-folder"],[1,"separator"],[1,"fa","fa-chevron-right"],[1,"empty-folder"],[1,"empty-icon"],[1,"fa","fa-folder-open"],[1,"explorer-item"],["class","folder",3,"click",4,"ngIf"],["class","file",3,"click",4,"ngIf"],[1,"folder",3,"click"],[1,"folder-icon"],[1,"fa","fa-folder-open","folder-hover"],[1,"item-info"],[1,"name"],[1,"type"],[1,"folder-arrow"],[1,"file",3,"click"],[1,"file-icon"],[1,"material-icons"],[1,"description"],[1,"file-action"],[1,"fa","fa-external-link"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return n.goBack()}),d(3,"i",3),i(4,"span"),p(5,"Back"),o()(),i(6,"div",4),d(7,"i",5),i(8,"h2"),p(9),o()()(),i(10,"div",6)(11,"div",7)(12,"span",8),g("click",function(){return n.navigateBreadcrumb(0)}),d(13,"i",9),o(),m(14,E,4,5,"span",10),o()(),i(15,"div",11)(16,"div",12),m(17,V,7,0,"div",13)(18,F,3,2,"div",14),o()()()),t&2&&(c(9),y("",n.formatName(n.syllabusType)," Syllabus Explorer"),c(5),f("ngForOf",n.breadcrumbs),c(3),f("ngIf",!n.currentData||n.getObjectKeys(n.currentData).length===0),c(),f("ngForOf",n.getObjectKeys(n.currentData)))},dependencies:[w,O,M,k],styles:['.syllabus-viewer[_ngcontent-%COMP%]{background:#fff;overflow:hidden;font-family:Segoe UI,system-ui,-apple-system,sans-serif;height:100%;display:flex;flex-direction:column;border-radius:0;box-shadow:none}.explorer-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:16px 24px;display:flex;align-items:center;gap:20px;position:relative;flex-shrink:0;min-height:80px;box-sizing:border-box}.explorer-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;width:200px;height:200px;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%)}.back-button[_ngcontent-%COMP%]{background:#ffffff26;border:1px solid rgba(255,255,255,.2);color:#fff;padding:10px 16px;border-radius:6px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;font-weight:500;backdrop-filter:blur(10px);flex-shrink:0;white-space:nowrap}.back-button[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translate(-2px)}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1;min-width:0}.header-icon[_ngcontent-%COMP%]{font-size:1.8rem;opacity:.9;flex-shrink:0}.explorer-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.3rem;text-shadow:0 2px 4px rgba(0,0,0,.1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.breadcrumb[_ngcontent-%COMP%]{background:linear-gradient(to right,#f8fafc,#f1f5f9);padding:12px 24px;border-bottom:1px solid #e2e8f0;flex-shrink:0}.breadcrumb-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;overflow-x:auto;padding-bottom:2px}.breadcrumb-home[_ngcontent-%COMP%]{cursor:pointer;padding:6px 10px;border-radius:6px;transition:all .2s ease;color:#64748b;display:flex;align-items:center;flex-shrink:0}.breadcrumb-home[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#475569}.breadcrumb-item[_ngcontent-%COMP%]{cursor:pointer;padding:6px 10px;border-radius:6px;transition:all .2s ease;color:#64748b;display:flex;align-items:center;gap:6px;font-size:.85rem;flex-shrink:0;white-space:nowrap}.breadcrumb-item[_ngcontent-%COMP%]:not(.active):hover{background:#e2e8f0;color:#475569}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#334155;font-weight:600;cursor:default;background:#f1f5f9}.separator[_ngcontent-%COMP%]{margin-left:6px;color:#cbd5e1;font-size:.7rem}.explorer-window[_ngcontent-%COMP%]{flex:1;background:#fafbfc;overflow-y:auto;min-height:0}.content-pane[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;min-height:min-content}.empty-folder[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:60px 20px;color:#64748b;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px}.empty-icon[_ngcontent-%COMP%]{margin-bottom:20px}.empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e1;opacity:.7}.empty-folder[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:8px;color:#475569;font-weight:600}.empty-folder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#64748b}.explorer-item[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:10px;transition:all .3s cubic-bezier(.4,0,.2,1);cursor:pointer;overflow:hidden;position:relative;min-height:100px;display:flex;flex-direction:column;justify-content:center}.explorer-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(135deg,#667eea,#764ba2);transform:scaleX(0);transition:transform .3s ease}.explorer-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 24px #0000001f;border-color:#c7d2fe}.explorer-item[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.folder[_ngcontent-%COMP%]{padding:20px;display:flex;align-items:center;gap:14px;position:relative;height:100%}.folder-icon[_ngcontent-%COMP%]{position:relative;width:44px;height:44px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.folder-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.2rem;transition:all .3s ease;position:absolute}.folder-icon[_ngcontent-%COMP%]   .fa-folder[_ngcontent-%COMP%]{color:#f59e0b;opacity:1}.folder-icon[_ngcontent-%COMP%]   .folder-hover[_ngcontent-%COMP%]{color:#fbbf24;opacity:0;transform:scale(.8)}.folder[_ngcontent-%COMP%]:hover   .folder-icon[_ngcontent-%COMP%]   .fa-folder[_ngcontent-%COMP%]{opacity:0;transform:scale(.8)}.folder[_ngcontent-%COMP%]:hover   .folder-icon[_ngcontent-%COMP%]   .folder-hover[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.folder-arrow[_ngcontent-%COMP%]{margin-left:auto;color:#cbd5e1;transition:all .3s ease;flex-shrink:0}.folder[_ngcontent-%COMP%]:hover   .folder-arrow[_ngcontent-%COMP%]{color:#667eea;transform:translate(4px)}.file[_ngcontent-%COMP%]{padding:20px;display:flex;align-items:center;gap:14px;position:relative;height:100%}.file-icon[_ngcontent-%COMP%]{width:44px;height:44px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#fee2e2,#fecaca);border-radius:8px;flex-shrink:0}.file-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#dc2626}.file[_ngcontent-%COMP%]:hover   .file-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fecaca,#fca5a5)}.file-action[_ngcontent-%COMP%]{margin-left:auto;color:#cbd5e1;transition:all .3s ease;opacity:0;flex-shrink:0}.file[_ngcontent-%COMP%]:hover   .file-action[_ngcontent-%COMP%]{color:#667eea;opacity:1;transform:scale(1.1)}.item-info[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden}.name[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px;color:#1e293b;font-size:.9rem;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.type[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-size:.78rem;color:#64748b;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width: 768px){.content-pane[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(240px,1fr));padding:16px;gap:12px}.explorer-header[_ngcontent-%COMP%]{padding:14px 16px;min-height:70px}.breadcrumb[_ngcontent-%COMP%]{padding:10px 16px}.folder[_ngcontent-%COMP%], .file[_ngcontent-%COMP%]{padding:16px}.back-button[_ngcontent-%COMP%]{padding:8px 12px;font-size:.9rem}.explorer-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 480px){.content-pane[_ngcontent-%COMP%]{grid-template-columns:1fr}.explorer-header[_ngcontent-%COMP%]{gap:12px}.header-icon[_ngcontent-%COMP%]{font-size:1.5rem}.explorer-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}}']})};export{I as a};
