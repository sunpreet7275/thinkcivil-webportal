import{a as R}from"./chunk-ZZCTLGZF.js";import{x as j}from"./chunk-32HIGO4K.js";import{a as N}from"./chunk-VR4E7QUQ.js";import"./chunk-OI25WLE4.js";import"./chunk-OQEWKVRI.js";import{$c as z,Fb as s,Hb as O,Ob as i,Pb as o,Qb as c,Ub as P,Uc as T,Vc as $,Wb as y,Xb as d,ca as S,cb as h,fc as E,gb as r,gc as g,gd as U,ha as v,hc as x,ic as p,id as H,lb as k,qa as C,ra as b,sb as I,vc as D,yb as m}from"./chunk-66BASCB4.js";var u=class t{constructor(n,e){this.http=n;this.authService=e}apiUrl=`${N.apiUrl}/meetings`;getHeaders(){let n=this.authService.getToken();return new U({Authorization:`Bearer ${n}`,"Content-Type":"application/json"})}getStudentMeetings(){return this.http.get(`${this.apiUrl}/student`,{headers:this.getHeaders()})}getAllMeetings(){return this.http.get(`${this.apiUrl}`,{headers:this.getHeaders()})}static \u0275fac=function(e){return new(e||t)(v(H),v(R))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};function J(t,n){if(t&1){let e=P();i(0,"div",12),c(1,"i",13),g(2),i(3,"button",14),y("click",function(){C(e);let l=d(2);return b(l.infoMessage="")}),c(4,"i",15),o()()}if(t&2){let e=d(2);r(2),p(" ",e.infoMessage," ")}}function V(t,n){if(t&1){let e=P();i(0,"div",16),c(1,"i",17),g(2),i(3,"button",14),y("click",function(){C(e);let l=d(2);return b(l.errorMessage="")}),c(4,"i",15),o()()}if(t&2){let e=d(2);r(2),p(" ",e.errorMessage," ")}}function Y(t,n){if(t&1&&(i(0,"div",9),m(1,J,5,1,"div",10)(2,V,5,1,"div",11),o()),t&2){let e=d();r(),s("ngIf",e.infoMessage),r(),s("ngIf",e.errorMessage)}}function q(t,n){t&1&&(i(0,"div",18)(1,"div",19)(2,"div",20),c(3,"i",21),o(),i(4,"p"),g(5,"Loading meetings..."),o()()())}function B(t,n){t&1&&(i(0,"div",29),c(1,"i",30),i(2,"h4"),g(3,"No upcoming meetings scheduled"),o(),i(4,"p"),g(5,"Your instructor will schedule meetings here"),o()())}function W(t,n){if(t&1&&(i(0,"small",49),g(1),o()),t&2){let e=d().$implicit,a=d(3);r(),p(" (",a.getRelativeTime(e.meetingDate),") ")}}function G(t,n){if(t&1&&(i(0,"div",50),c(1,"i",51),g(2),o()),t&2){let e=d().$implicit;r(2),p(" ",e.description," ")}}function K(t,n){t&1&&(i(0,"div",52)(1,"div",53),c(2,"i",54),g(3," Meeting is live - Join now! "),o()())}function Q(t,n){if(t&1&&(i(0,"div",33)(1,"div",34)(2,"div",35)(3,"h4"),g(4),o(),i(5,"span",36),g(6),o()(),i(7,"div",37)(8,"span",38),c(9,"i",24),g(10),o()()(),i(11,"div",39)(12,"div",40),c(13,"i",41),i(14,"strong"),g(15),o(),m(16,W,2,1,"small",42),o(),m(17,G,3,1,"div",43),i(18,"div",44),c(19,"i",45),i(20,"a",46),c(21,"i",47),g(22," Join Meeting "),o()()(),m(23,K,4,0,"div",48),o()),t&2){let e=n.$implicit,a=d(3);O("live-now",a.isMeetingNow(e))("upcoming",a.isMeetingUpcoming(e)),r(4),x(e.title),r(),O("now",a.isMeetingNow(e))("upcoming",a.isMeetingUpcoming(e)),r(),p(" ",a.isMeetingNow(e)?"Live Now":"Upcoming"," "),r(4),p(" Duration: ",a.formatDuration(e.duration)," "),r(5),x(a.formatDate(e.meetingDate)),r(),s("ngIf",a.isMeetingUpcoming(e)),r(),s("ngIf",e.description),r(3),s("href",e.meetingLink,h),r(3),s("ngIf",a.isMeetingNow(e))}}function X(t,n){if(t&1&&(i(0,"div",31),m(1,Q,24,16,"div",32),o()),t&2){let e=d(2);r(),s("ngForOf",e.upcomingMeetings)}}function Z(t,n){if(t&1&&(i(0,"div",22)(1,"div",23)(2,"h3"),c(3,"i",24),g(4," Upcoming Meetings "),i(5,"span",25),g(6),o()(),i(7,"div",26),c(8,"i",13),g(9," Join meetings using the provided links "),o()(),m(10,B,6,0,"div",27)(11,X,2,1,"div",28),o()),t&2){let e=d();r(6),x(e.upcomingMeetings.length),r(4),s("ngIf",e.upcomingMeetings.length===0),r(),s("ngIf",e.upcomingMeetings.length>0)}}function ee(t,n){if(t&1&&(i(0,"div",50),c(1,"i",51),g(2),o()),t&2){let e=d().$implicit;r(2),p(" ",e.description," ")}}function te(t,n){if(t&1&&(i(0,"div",62),c(1,"i",63),i(2,"a",64),c(3,"i",65),g(4," Watch Recording "),o()()),t&2){let e=d().$implicit;r(2),s("href",e.videoLink,h)}}function ne(t,n){t&1&&(i(0,"div",62),c(1,"i",66),i(2,"span",67),g(3,"Recording not available"),o()())}function ie(t,n){if(t&1&&(i(0,"div",58)(1,"div",34)(2,"div",35)(3,"h4"),g(4),o(),i(5,"span",59),c(6,"i",60),g(7," Completed "),o()(),i(8,"div",37)(9,"span",38),c(10,"i",24),g(11),o()()(),i(12,"div",39)(13,"div",40),c(14,"i",41),g(15),o(),m(16,ee,3,1,"div",43)(17,te,5,1,"div",61)(18,ne,4,0,"ng-template",null,0,D),o()()),t&2){let e=n.$implicit,a=E(19),l=d(2);r(4),x(e.title),r(7),p(" ",l.formatDuration(e.duration)," "),r(4),p(" ",l.formatDate(e.meetingDate)," "),r(),s("ngIf",e.description),r(),s("ngIf",e.videoLink)("ngIfElse",a)}}function oe(t,n){if(t&1&&(i(0,"div",22)(1,"div",23)(2,"h3"),c(3,"i",55),g(4," Past Meetings "),i(5,"span",25),g(6),o()(),i(7,"div",26),c(8,"i",13),g(9," Watch recordings of past meetings "),o()(),i(10,"div",56),m(11,ie,20,6,"div",57),o()()),t&2){let e=d();r(6),x(e.completedMeetings.length),r(5),s("ngForOf",e.completedMeetings)}}var F=class t{constructor(n){this.meetingService=n}upcomingMeetings=[];completedMeetings=[];loading=!1;infoMessage="";errorMessage="";ngOnInit(){this.loadMeetings()}loadMeetings(){this.loading=!0,this.meetingService.getStudentMeetings().subscribe({next:n=>{this.upcomingMeetings=n.upcomingMeetings,this.completedMeetings=n.completedMeetings,this.loading=!1,this.clearMessages()},error:n=>{this.showError("Failed to load meetings",n)}})}formatDate(n){if(!n)return"-";let e=new Date(n),a=e.getDate().toString().padStart(2,"0"),f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],w=e.getFullYear(),_=e.getHours().toString().padStart(2,"0"),M=e.getMinutes().toString().padStart(2,"0");return`${a}-${f}-${w} ${_}:${M}`}formatDuration(n){if(!n)return"-";let e=Math.floor(n/60),a=n%60;return e===0?`${n} minutes`:a===0?`${e} ${e===1?"hour":"hours"}`:`${e}h ${a}m`}isMeetingNow(n){let e=new Date,a=new Date(n.meetingDate),l=new Date(a.getTime()+n.duration*6e4);return e>=a&&e<=l}isMeetingUpcoming(n){let e=new Date,a=new Date(n.meetingDate);return e<a}getRelativeTime(n){if(!n)return"";let e=new Date(n),a=new Date,l=e.getTime()-a.getTime(),f=Math.floor(l/(1e3*60*60*24)),w=Math.floor(l%(1e3*60*60*24)/(1e3*60*60));if(f===0){let _=e.getHours().toString().padStart(2,"0"),M=e.getMinutes().toString().padStart(2,"0");return`today at ${_}:${M}`}else if(f===1){let _=e.getHours().toString().padStart(2,"0"),M=e.getMinutes().toString().padStart(2,"0");return`tomorrow at ${_}:${M}`}else return f<7?`in ${f} days`:""}showError(n,e){this.loading=!1,this.errorMessage=`${n}: ${e.error?.message||e.message||"Unknown error"}`,console.error(n,e),setTimeout(()=>{this.errorMessage=""},5e3)}clearMessages(){this.errorMessage="",this.infoMessage=""}static \u0275fac=function(e){return new(e||t)(k(u))};static \u0275cmp=I({type:t,selectors:[["app-meeting"]],decls:11,vars:4,consts:[["noRecording",""],[1,"meeting-container","student"],[1,"meeting-header"],[1,"header-content"],[1,"fa","fa-calendar-check","header-icon"],[1,"header-info"],["class","messages-container",4,"ngIf"],["class","loading-overlay",4,"ngIf"],["class","meetings-section",4,"ngIf"],[1,"messages-container"],["class","message info",4,"ngIf"],["class","message error",4,"ngIf"],[1,"message","info"],[1,"fa","fa-info-circle"],[1,"message-close",3,"click"],[1,"fa","fa-times"],[1,"message","error"],[1,"fa","fa-exclamation-circle"],[1,"loading-overlay"],[1,"loading-content"],[1,"spinner"],[1,"fa","fa-spinner","fa-spin"],[1,"meetings-section"],[1,"section-header"],[1,"fa","fa-clock"],[1,"badge"],[1,"section-hint"],["class","empty-state",4,"ngIf"],["class","meetings-grid",4,"ngIf"],[1,"empty-state"],[1,"fa","fa-calendar-times"],[1,"meetings-grid"],["class","meeting-card",3,"live-now","upcoming",4,"ngFor","ngForOf"],[1,"meeting-card"],[1,"card-header"],[1,"card-title"],[1,"status-badge"],[1,"card-meta"],[1,"meta-item"],[1,"card-body"],[1,"meeting-date"],[1,"fa","fa-calendar-alt"],["class","relative-time",4,"ngIf"],["class","meeting-description",4,"ngIf"],[1,"meeting-link"],[1,"fa","fa-link"],["target","_blank",1,"join-link",3,"href"],[1,"fa","fa-external-link-alt"],["class","card-footer",4,"ngIf"],[1,"relative-time"],[1,"meeting-description"],[1,"fa","fa-file-alt"],[1,"card-footer"],[1,"live-indicator"],[1,"fa","fa-circle","live-dot"],[1,"fa","fa-history"],[1,"meetings-grid","history"],["class","meeting-card completed",4,"ngFor","ngForOf"],[1,"meeting-card","completed"],[1,"status-badge","completed"],[1,"fa","fa-check-circle"],["class","meeting-recording",4,"ngIf","ngIfElse"],[1,"meeting-recording"],[1,"fa","fa-video"],["target","_blank",1,"watch-link",3,"href"],[1,"fa","fa-play-circle"],[1,"fa","fa-video-slash"],[1,"no-recording"]],template:function(e,a){e&1&&(i(0,"div",1)(1,"div",2)(2,"div",3),c(3,"i",4),i(4,"h2"),g(5,"Class Meetings"),o()(),c(6,"div",5),o(),m(7,Y,3,2,"div",6)(8,q,6,0,"div",7)(9,Z,12,3,"div",8)(10,oe,12,2,"div",8),o()),e&2&&(r(7),s("ngIf",a.infoMessage||a.errorMessage),r(),s("ngIf",a.loading),r(),s("ngIf",!a.loading),r(),s("ngIf",!a.loading&&a.completedMeetings.length>0))},dependencies:[z,T,$,j],styles:['.meeting-container.student[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 40px #00000014;overflow:hidden;max-width:1400px;margin:20px auto;font-family:Segoe UI,system-ui,-apple-system,sans-serif;min-height:80vh}.meeting-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#34d399);color:#fff;padding:28px 40px;display:flex;align-items:center;justify-content:space-between;position:relative;overflow:hidden}.meeting-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-10%;width:300px;height:300px;background:radial-gradient(circle,rgba(255,255,255,.12) 0%,transparent 70%);border-radius:50%}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px;z-index:1}.header-icon[_ngcontent-%COMP%]{font-size:2.2rem;opacity:.95;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.meeting-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.8rem;text-shadow:0 2px 8px rgba(0,0,0,.15);letter-spacing:-.3px}.header-info[_ngcontent-%COMP%]{z-index:1}.student-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:#ffffff26;border:1px solid rgba(255,255,255,.25);border-radius:10px;backdrop-filter:blur(12px);font-weight:500;font-size:.95rem}.messages-container[_ngcontent-%COMP%]{padding:0 40px;margin-top:20px}.message[_ngcontent-%COMP%]{padding:16px 20px;border-radius:10px;display:flex;align-items:center;gap:12px;margin-bottom:12px;animation:_ngcontent-%COMP%_slideIn .3s ease;position:relative}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.message.info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border:1px solid #93c5fd;color:#1e40af}.message.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8d7da,#f5c6cb);border:1px solid #f1b0b7;color:#721c24}.message-close[_ngcontent-%COMP%]{background:none;border:none;color:inherit;cursor:pointer;padding:4px;margin-left:auto;opacity:.7;transition:opacity .2s}.message-close[_ngcontent-%COMP%]:hover{opacity:1}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffffff2;display:flex;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(4px)}.loading-content[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#10b981;animation:_ngcontent-%COMP%_spin 1.2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#64748b;font-weight:500}.meetings-section[_ngcontent-%COMP%]{padding:30px 40px}.meetings-section[_ngcontent-%COMP%] + .meetings-section[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0}.section-header[_ngcontent-%COMP%]{margin-bottom:24px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.4rem;color:#1e293b;display:flex;align-items:center;gap:10px}.badge[_ngcontent-%COMP%]{background:#e2e8f0;color:#475569;padding:4px 12px;border-radius:20px;font-size:.85rem;font-weight:600}.section-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#64748b;font-size:.95rem;margin-top:4px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#64748b}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e1;margin-bottom:20px;opacity:.6}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:12px;color:#475569}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#64748b}.meetings-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px}.meetings-grid.history[_ngcontent-%COMP%]{opacity:.9}.meeting-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;overflow:hidden;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column}.meeting-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 10px 25px #0000001a}.meeting-card.live-now[_ngcontent-%COMP%]{border-left:4px solid #10b981;background:linear-gradient(135deg,#f0fdf4,#dcfce7);animation:_ngcontent-%COMP%_pulse-border 2s infinite}@keyframes _ngcontent-%COMP%_pulse-border{0%{border-left-color:#10b981}50%{border-left-color:#34d399}to{border-left-color:#10b981}}.meeting-card.upcoming[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.meeting-card.completed[_ngcontent-%COMP%]{border-left:4px solid #94a3b8;opacity:.95}.card-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e2e8f0;background:#f8fafc}.card-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:12px}.card-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#1e293b;flex:1;line-height:1.4}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.status-badge.now[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#34d399);color:#fff;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.status-badge.upcoming[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#60a5fa);color:#fff}.status-badge.completed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#94a3b8,#cbd5e1);color:#475569}.card-meta[_ngcontent-%COMP%]{display:flex;gap:16px}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#64748b;font-size:.9rem}.card-body[_ngcontent-%COMP%]{padding:20px;flex:1;display:flex;flex-direction:column;gap:16px}.meeting-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#475569;font-size:1rem}.meeting-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981;width:20px}.meeting-date[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{flex:1}.relative-time[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;font-style:italic}.meeting-description[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;color:#64748b;font-size:.95rem;line-height:1.5}.meeting-description[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;width:20px;margin-top:2px}.meeting-link[_ngcontent-%COMP%], .meeting-recording[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#475569;font-size:1rem}.meeting-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .meeting-recording[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#8b5cf6;width:20px}.join-link[_ngcontent-%COMP%], .watch-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;color:#3b82f6;text-decoration:none;font-weight:500;padding:10px 16px;background:#eff6ff;border-radius:8px;transition:all .2s ease}.join-link[_ngcontent-%COMP%]:hover, .watch-link[_ngcontent-%COMP%]:hover{background:#dbeafe;color:#1d4ed8;text-decoration:none}.no-recording[_ngcontent-%COMP%]{color:#94a3b8;font-style:italic;padding:10px 16px;background:#f8fafc;border-radius:8px}.card-footer[_ngcontent-%COMP%]{padding:16px 20px;background:#f0fdf4;border-top:1px solid #bbf7d0}.live-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#065f46;font-weight:600;font-size:.95rem}.live-dot[_ngcontent-%COMP%]{color:#10b981;animation:_ngcontent-%COMP%_blink 1.5s infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.3}}@media (max-width: 992px){.meeting-container.student[_ngcontent-%COMP%]{margin:10px}.meeting-header[_ngcontent-%COMP%]{padding:24px;flex-direction:column;gap:20px;text-align:center}.meetings-section[_ngcontent-%COMP%]{padding:20px}.meetings-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.card-title[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.card-meta[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}@media (max-width: 576px){.meetings-section[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%], .card-footer[_ngcontent-%COMP%]{padding:16px}.join-link[_ngcontent-%COMP%], .watch-link[_ngcontent-%COMP%], .no-recording[_ngcontent-%COMP%]{padding:8px 12px;font-size:.9rem}}']})};export{F as MeetingComponent};
