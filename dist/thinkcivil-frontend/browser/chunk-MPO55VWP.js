import{a as G,b as K,c as Q,d as X,e as Y,f as tt,g as et,h as nt,i as it,j as at,k as ot}from"./chunk-TS4JPLUG.js";import"./chunk-VGVSFWK5.js";import{a as N}from"./chunk-MKK2EQTI.js";import{a as F,b as W}from"./chunk-Y6XZ2CXE.js";import{a as z,b as q}from"./chunk-OQXYGOAF.js";import{a as R,b as B,c as j,f as A,g as H,h as V,j as Z}from"./chunk-XXQAJVF2.js";import"./chunk-7RWCIHFI.js";import{h as $,i as J,k as U}from"./chunk-TC5NRSHV.js";import"./chunk-DPS2XDEH.js";import"./chunk-QF2K6SUP.js";import"./chunk-VR4E7QUQ.js";import{d as I}from"./chunk-OI25WLE4.js";import"./chunk-OQEWKVRI.js";import{$c as k,Fb as m,Ga as x,Gc as O,Ob as i,Pb as a,Qb as _,Rb as c,Sb as p,Ub as D,Vc as T,Wb as S,Xb as h,_c as L,gb as r,gc as o,hc as M,ia as f,ic as g,qa as w,ra as y,sb as b,sc as E,uc as P,yb as l}from"./chunk-66BASCB4.js";function mt(t,e){if(t&1){let n=D();i(0,"button",8),S("click",function(){w(n);let u=h();return y(u.exportStudents())}),i(1,"mat-icon"),o(2,"download"),a(),o(3," Export CSV "),a()}}function st(t,e){t&1&&(i(0,"div",9),_(1,"mat-spinner"),i(2,"p"),o(3,"Loading students..."),a()())}function ct(t,e){t&1&&(i(0,"th",23),o(1,"Name"),a())}function pt(t,e){if(t&1&&(i(0,"td",24)(1,"div",25)(2,"strong"),o(3),a()()()),t&2){let n=e.$implicit;r(3),M(n.fullName)}}function ut(t,e){t&1&&(i(0,"th",23),o(1,"Email"),a())}function ft(t,e){if(t&1&&(i(0,"td",24),o(1),a()),t&2){let n=e.$implicit;r(),g(" ",n.email," ")}}function _t(t,e){t&1&&(i(0,"th",23),o(1,"Phone"),a())}function gt(t,e){if(t&1&&(i(0,"td",24),o(1),a()),t&2){let n=e.$implicit;r(),g(" ",n.phone," ")}}function Ct(t,e){t&1&&(i(0,"th",23),o(1,"Joined Date"),a())}function xt(t,e){if(t&1&&(i(0,"td",24),o(1),E(2,"date"),a()),t&2){let n=e.$implicit;r(),g(" ",P(2,1,n.createdAt,"mediumDate")," ")}}function St(t,e){t&1&&_(0,"tr",26)}function ht(t,e){t&1&&_(0,"tr",27)}function Mt(t,e){if(t&1&&(i(0,"div",10)(1,"mat-card")(2,"mat-card-content")(3,"table",11),c(4,12),l(5,ct,2,0,"th",13)(6,pt,4,1,"td",14),p(),c(7,15),l(8,ut,2,0,"th",13)(9,ft,2,1,"td",14),p(),c(10,16),l(11,_t,2,0,"th",13)(12,gt,2,1,"td",14),p(),c(13,17),l(14,Ct,2,0,"th",13)(15,xt,3,4,"td",14),p(),l(16,St,1,0,"tr",18)(17,ht,1,0,"tr",19),a()()(),i(18,"mat-card",20)(19,"mat-card-header")(20,"mat-card-title"),o(21,"Summary"),a()(),i(22,"mat-card-content")(23,"div",21)(24,"div",22)(25,"h3"),o(26),a(),i(27,"p"),o(28,"Total Students"),a()()()()()()),t&2){let n=h();r(3),m("dataSource",n.students()),r(13),m("matHeaderRowDef",n.displayedColumns),r(),m("matRowDefColumns",n.displayedColumns),r(9),M(n.students().length)}}function vt(t,e){t&1&&(i(0,"div",28)(1,"mat-card")(2,"mat-card-content")(3,"p"),o(4,"No students found."),a(),i(5,"p"),o(6,"Students will appear here once they register."),a()()()())}var rt=class t{router=f(I);snackBar=f(z);userService=f(N);students=x([]);loading=x(!0);displayedColumns=["fullName","email","phone","joinedDate"];recentStudentsCount=O(()=>{let e=new Date;return e.setMonth(e.getMonth()-1),this.students().filter(n=>new Date(n.createdAt)>e).length});mockStudents=[{_id:"1",fullName:"John Doe",email:"john@example.com",phone:"1234567890",role:"student",createdAt:"2024-01-15T10:30:00.000Z"},{_id:"2",fullName:"Jane Smith",email:"jane@example.com",phone:"0987654321",role:"student",createdAt:"2024-01-20T14:45:00.000Z"},{_id:"3",fullName:"Mike Johnson",email:"mike@example.com",phone:"5551234567",role:"student",createdAt:"2024-02-01T09:15:00.000Z"},{_id:"4",fullName:"Sarah Wilson",email:"sarah@example.com",phone:"4445556666",role:"student",createdAt:"2024-03-10T11:20:00.000Z"}];ngOnInit(){this.loadStudents()}loadStudents(){this.loading.set(!0),this.userService.getAllStudents().subscribe({next:e=>{this.students.set(e),this.loading.set(!1)},error:e=>{console.error("Error loading students:",e),this.snackBar.open("Error loading students","Close",{duration:3e3}),this.loading.set(!1)}})}goBack(){this.router.navigate(["/dashboard"])}viewStudentResults(e){this.router.navigate(["/admin-results"],{queryParams:{studentId:e}})}exportStudents(){let e=this.students();if(e.length===0)return;let n=["Name","Email","Phone","Joined Date"],d=e.map(s=>[s.fullName,s.email,s.phone,new Date(s.createdAt).toLocaleDateString()]),u=[n,...d].map(s=>s.map(lt=>`"${lt}"`).join(",")).join(`
`),dt=new Blob([u],{type:"text/csv"}),v=window.URL.createObjectURL(dt),C=document.createElement("a");C.href=v,C.download=`students-list-${new Date().toISOString().split("T")[0]}.csv`,C.click(),window.URL.revokeObjectURL(v),this.snackBar.open("Students list exported successfully","Close",{duration:3e3})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["app-students-list"]],decls:15,vars:4,consts:[[1,"students-list-container"],[1,"header"],[1,"header-content"],["mat-icon-button","",1,"back-button",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["class","students-content",4,"ngIf"],["class","no-students",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"loading"],[1,"students-content"],["mat-table","",1,"students-table",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","joinedDate"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"summary-card"],[1,"summary-stats"],[1,"summary-item"],["mat-header-cell",""],["mat-cell",""],[1,"student-name"],["mat-header-row",""],["mat-row",""],[1,"no-students"]],template:function(n,d){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),S("click",function(){return d.goBack()}),i(4,"mat-icon"),o(5,"arrow_back"),a()(),i(6,"div")(7,"h1"),o(8,"All Students"),a(),i(9,"p"),o(10,"Manage and view all registered students"),a()()(),l(11,mt,4,0,"button",4),a(),l(12,st,4,0,"div",5)(13,Mt,29,4,"div",6)(14,vt,7,0,"div",7),a()),n&2&&(r(11),m("ngIf",d.students().length>0),r(),m("ngIf",d.loading()),r(),m("ngIf",!d.loading()&&d.students().length>0),r(),m("ngIf",!d.loading()&&d.students().length===0))},dependencies:[k,T,L,H,R,j,A,B,ot,G,Q,et,X,K,nt,Y,tt,it,at,U,J,$,W,F,Z,V,q],styles:[".students-list-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;flex-wrap:wrap;gap:15px}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#3f51b5}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;gap:20px}.students-table[_ngcontent-%COMP%]{width:100%}.student-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.summary-card[_ngcontent-%COMP%]{margin-top:20px}.summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px}.summary-item[_ngcontent-%COMP%]{text-align:center;padding:15px;background:#f5f5f5;border-radius:8px}.summary-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.8em;color:#3f51b5}.summary-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666}.no-students[_ngcontent-%COMP%]{text-align:center;padding:40px}@media (max-width: 768px){.students-list-container[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.students-table[_ngcontent-%COMP%]{font-size:.8em}.summary-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{rt as StudentsListComponent};
