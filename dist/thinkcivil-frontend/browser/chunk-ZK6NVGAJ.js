import{a as oe,b as ae}from"./chunk-L5XWPQG3.js";import{a as ce,b as fe}from"./chunk-Y6XZ2CXE.js";import{a as ne}from"./chunk-3GT6KHKF.js";import{b as Z,c as ee,d as te,e as ie,h as re}from"./chunk-2UDCYGGM.js";import{a as pe}from"./chunk-OQXYGOAF.js";import{a as W,b as J,c as K,d as Q,f as U,g as X,h as me,j as de}from"./chunk-XXQAJVF2.js";import{a as B}from"./chunk-ZZCTLGZF.js";import"./chunk-JTTWDSGT.js";import"./chunk-7RWCIHFI.js";import{h as ue,i as se,k as le}from"./chunk-TC5NRSHV.js";import{b as q,d as c,f as N,g as z,l as G,o as L,r as $,u as j,w as Y,y as H}from"./chunk-32HIGO4K.js";import"./chunk-DPS2XDEH.js";import"./chunk-QF2K6SUP.js";import"./chunk-VR4E7QUQ.js";import{d as D,e as V}from"./chunk-OI25WLE4.js";import"./chunk-OQEWKVRI.js";import{$c as A,Fb as u,Ga as d,Hb as k,Ob as o,Pb as r,Qb as f,Ub as I,Vc as R,Wb as g,Xb as _,gb as n,gc as a,hc as P,ia as b,ic as h,qa as x,ra as E,sb as S,yb as p}from"./chunk-66BASCB4.js";function _e(t,i){t&1&&(o(0,"mat-error"),a(1," \u092A\u0942\u0930\u093E \u0928\u093E\u092E \u0906\u0935\u0936\u094D\u092F\u0915 \u0939\u0948 / Full name is required "),r())}function he(t,i){t&1&&(o(0,"mat-error"),a(1," \u0908\u092E\u0947\u0932 \u0906\u0935\u0936\u094D\u092F\u0915 \u0939\u0948 / Email is required "),r())}function Ce(t,i){t&1&&(o(0,"mat-error"),a(1," \u0915\u0943\u092A\u092F\u093E \u0935\u0948\u0927 \u0908\u092E\u0947\u0932 \u0926\u0930\u094D\u091C \u0915\u0930\u0947\u0902 / Please enter a valid email "),r())}function be(t,i){t&1&&f(0,"mat-spinner",17)}function Pe(t,i){if(t&1&&(o(0,"span"),a(1),r()),t&2){let s=_();n(),h(" ",s.otpSent()?"OTP Sent \u2713":"Send OTP"," ")}}function xe(t,i){if(t&1&&(o(0,"mat-hint"),a(1),r()),t&2){let s=_(2);n(),h(" OTP expires in ",s.formatRemainingTime()," ")}}function Ee(t,i){t&1&&(o(0,"mat-error"),a(1," OTP \u0906\u0935\u0936\u094D\u092F\u0915 \u0939\u0948 / OTP is required "),r())}function ve(t,i){t&1&&(o(0,"mat-error"),a(1," 6-\u0905\u0902\u0915\u0940\u092F OTP \u0926\u0930\u094D\u091C \u0915\u0930\u0947\u0902 / Enter 6-digit OTP "),r())}function we(t,i){if(t&1){let s=I();o(0,"div",18)(1,"mat-form-field",3)(2,"mat-label"),a(3,"OTP / \u0935\u0928-\u091F\u093E\u0907\u092E \u092A\u093E\u0938\u0935\u0930\u094D\u0921"),r(),f(4,"input",19),o(5,"button",20)(6,"mat-icon"),a(7),r()(),p(8,xe,2,1,"mat-hint",5)(9,Ee,2,0,"mat-error",5)(10,ve,2,0,"mat-error",5),r(),o(11,"button",21),g("click",function(){x(s);let m=_();return E(m.verifyOTP())}),a(12),r(),o(13,"div",22)(14,"button",23),g("click",function(){x(s);let m=_();return E(m.resendOTP())}),a(15," Resend OTP "),r(),o(16,"span",24),a(17),r()()()}if(t&2){let s,e,m,C,l=_();n(5),u("disabled",l.verifyingOTP()||l.otpVerified()||((s=l.registerForm.get("otp"))==null?null:s.invalid)),n(2),P(l.otpVerified()?"check_circle":"verified"),n(),u("ngIf",l.otpSent()&&!l.otpVerified()),n(),u("ngIf",(e=l.registerForm.get("otp"))==null?null:e.hasError("required")),n(),u("ngIf",(m=l.registerForm.get("otp"))==null?null:m.hasError("pattern")),n(),u("disabled",l.verifyingOTP()||l.otpVerified()||((C=l.registerForm.get("otp"))==null?null:C.invalid)),n(),h(" ",l.otpVerified()?"OTP Verified":"Send OTP"," "),n(2),u("disabled",l.resendDisabled()||l.otpVerified()),n(2),k("verified",l.otpVerified()),n(),h(" ",l.otpVerified()?"\u2713 Email Verified":"Verification Pending"," ")}}function ye(t,i){t&1&&(o(0,"mat-error"),a(1," \u092B\u094B\u0928 \u0928\u0902\u092C\u0930 \u0906\u0935\u0936\u094D\u092F\u0915 \u0939\u0948 / Phone number is required "),r())}function Oe(t,i){t&1&&(o(0,"mat-error"),a(1," \u0915\u0943\u092A\u092F\u093E \u0935\u0948\u0927 10-\u0905\u0902\u0915\u0940\u092F \u092B\u094B\u0928 \u0928\u0902\u092C\u0930 \u0926\u0930\u094D\u091C \u0915\u0930\u0947\u0902 / Please enter a valid 10-digit phone number "),r())}function Te(t,i){t&1&&(o(0,"mat-error"),a(1," \u092A\u093E\u0938\u0935\u0930\u094D\u0921 \u0906\u0935\u0936\u094D\u092F\u0915 \u0939\u0948 / Password is required "),r())}function Fe(t,i){t&1&&(o(0,"mat-error"),a(1," \u092A\u093E\u0938\u0935\u0930\u094D\u0921 \u0915\u092E \u0938\u0947 \u0915\u092E 6 \u0905\u0915\u094D\u0937\u0930\u094B\u0902 \u0915\u093E \u0939\u094B\u0928\u093E \u091A\u093E\u0939\u093F\u090F / Password must be at least 6 characters "),r())}function Me(t,i){t&1&&(o(0,"mat-error"),a(1," \u0915\u0943\u092A\u092F\u093E \u0905\u092A\u0928\u0947 \u092A\u093E\u0938\u0935\u0930\u094D\u0921 \u0915\u0940 \u092A\u0941\u0937\u094D\u091F\u093F \u0915\u0930\u0947\u0902 / Please confirm your password "),r())}function Se(t,i){t&1&&(o(0,"mat-error"),a(1," \u092A\u093E\u0938\u0935\u0930\u094D\u0921 \u092E\u0947\u0932 \u0928\u0939\u0940\u0902 \u0916\u093E\u0924\u0947 / Passwords do not match "),r())}function ke(t,i){t&1&&f(0,"mat-spinner",17)}function Ie(t,i){if(t&1&&(o(0,"span"),a(1),r()),t&2){let s=_();n(),h(" ",s.otpVerified()?"\u092A\u0902\u091C\u0940\u0915\u0930\u0923 \u0915\u0930\u0947\u0902 / Register":"Verify Email First"," ")}}var ge=class t{fb=b(Y);authService=b(B);router=b(D);snackBar=b(pe);registerForm;loading=d(!1);sendingOTP=d(!1);verifyingOTP=d(!1);otpSent=d(!1);otpVerified=d(!1);showPassword=d(!1);showConfirmPassword=d(!1);showOTPField=d(!1);countdownConfig={leftTime:600,format:"mm:ss",demand:!0,prettyText:i=>i.split(":").map(s=>`<span style="font-size: 14px; color: #4CAF50;">${s}</span>`).join(":")};remainingTime=d(600);resendDisabled=d(!1);countdownRunning=d(!1);constructor(){this.registerForm=this.fb.group({fullName:["",[c.required]],email:["",[c.required,c.email]],phone:["",[c.required,c.pattern(/^\d{10}$/)]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",[c.required]],otp:["",[c.required,c.pattern(/^\d{6}$/)]]},{validators:this.passwordMatchValidator}),this.registerForm.get("otp")?.disable()}passwordMatchValidator(i){let s=i.get("password"),e=i.get("confirmPassword");return s&&e&&s.value!==e.value?{passwordMismatch:!0}:null}sendOTP(){if(this.registerForm.get("email")?.invalid){this.snackBar.open("Please enter a valid email","Close",{duration:3e3});return}this.sendingOTP.set(!0),this.authService.sendOTP(this.registerForm.get("email")?.value).subscribe({next:i=>{this.sendingOTP.set(!1),this.otpSent.set(!0),this.showOTPField.set(!0),this.registerForm.get("otp")?.enable(),this.resendDisabled.set(!0),this.countdownRunning.set(!0),this.snackBar.open("OTP sent to your email!","Close",{duration:3e3}),setTimeout(()=>{this.resendDisabled.set(!1)},6e4)},error:i=>{this.sendingOTP.set(!1),this.snackBar.open(i.error?.message||"Failed to send OTP","Close",{duration:3e3})}})}verifyOTP(){if(this.registerForm.get("otp")?.invalid){this.snackBar.open("Please enter a valid 6-digit OTP","Close",{duration:3e3});return}this.verifyingOTP.set(!0);let{email:i,otp:s}=this.registerForm.value;this.authService.verifyOTP(i,s).subscribe({next:e=>{this.verifyingOTP.set(!1),this.otpVerified.set(!0),this.countdownRunning.set(!1),this.snackBar.open("Email verified successfully!","Close",{duration:3e3})},error:e=>{this.verifyingOTP.set(!1),this.snackBar.open(e.error?.message||"Invalid OTP","Close",{duration:3e3})}})}resendOTP(){this.resendDisabled()||this.sendOTP()}handleCountdownEvent(i){i.action==="notify"&&this.remainingTime.set(i.left/1e3),i.action==="done"&&(this.otpSent.set(!1),this.showOTPField.set(!1),this.registerForm.get("otp")?.disable(),this.registerForm.get("otp")?.setValue(""),this.otpVerified.set(!1),this.countdownRunning.set(!1),this.snackBar.open("OTP expired. Please request a new one.","Close",{duration:3e3}))}formatRemainingTime(){let i=Math.floor(this.remainingTime()/60),s=Math.floor(this.remainingTime()%60);return`${i}:${s.toString().padStart(2,"0")}`}togglePasswordVisibility(){this.showPassword.set(!this.showPassword())}toggleConfirmPasswordVisibility(){this.showConfirmPassword.set(!this.showConfirmPassword())}startCountdown(){this.countdownRunning.set(!0)}stopCountdown(){this.countdownRunning.set(!1)}onSubmit(){if(!this.otpVerified()){this.snackBar.open("Please verify your email first","Close",{duration:3e3});return}this.registerForm.valid?(this.loading.set(!0),this.authService.register(this.registerForm.value).subscribe({next:i=>{this.authService.setAuthData(i),this.router.navigate(["/dashboard"]),this.snackBar.open("Registration successful! Welcome to ThinkCivil IAS","Close",{duration:5e3})},error:i=>{this.loading.set(!1),this.snackBar.open(i.error?.message||"Registration failed","Close",{duration:3e3})},complete:()=>{this.loading.set(!1)}})):this.snackBar.open("Please fill all required fields correctly","Close",{duration:3e3})}static \u0275fac=function(s){return new(s||t)};static \u0275cmp=S({type:t,selectors:[["app-register"]],decls:56,vars:22,consts:[[1,"register-container"],[1,"register-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","fullName","placeholder","\u0905\u092A\u0928\u093E \u092A\u0942\u0930\u093E \u0928\u093E\u092E \u0926\u0930\u094D\u091C \u0915\u0930\u0947\u0902 / Enter your full name"],[4,"ngIf"],["matInput","","formControlName","email","type","email","placeholder","\u0905\u092A\u0928\u093E \u0908\u092E\u0947\u0932 \u0926\u0930\u094D\u091C \u0915\u0930\u0947\u0902 / Enter your email",3,"readonly"],["mat-raised-button","","color","primary","type","button",1,"full-width","otp-button",3,"click","disabled"],["diameter","20",4,"ngIf"],["class","otp-section",4,"ngIf"],["matInput","","formControlName","phone","placeholder","\u0905\u092A\u0928\u093E 10-\u0905\u0902\u0915\u0940\u092F \u092B\u094B\u0928 \u0928\u0902\u092C\u0930 \u0926\u0930\u094D\u091C \u0915\u0930\u0947\u0902 / Enter your 10-digit phone number"],["matInput","","formControlName","password","placeholder","\u0905\u092A\u0928\u093E \u092A\u093E\u0938\u0935\u0930\u094D\u0921 \u0926\u0930\u094D\u091C \u0915\u0930\u0947\u0902 / Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","\u0905\u092A\u0928\u0947 \u092A\u093E\u0938\u0935\u0930\u094D\u0921 \u0915\u0940 \u092A\u0941\u0937\u094D\u091F\u093F \u0915\u0930\u0947\u0902 / Confirm your password",3,"type"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[1,"login-link"],["routerLink","/login"],["diameter","20"],[1,"otp-section"],["matInput","","formControlName","otp","placeholder","6-\u0905\u0902\u0915\u0940\u092F OTP \u0926\u0930\u094D\u091C \u0915\u0930\u0947\u0902 / Enter 6-digit OTP","maxlength","6"],["mat-icon-button","","matSuffix","","type","button",3,"disabled"],["mat-raised-button","","color","primary","type","button",1,"full-width",3,"click","disabled"],[1,"otp-actions"],["mat-button","","type","button",3,"click","disabled"],[1,"otp-status"]],template:function(s,e){if(s&1&&(o(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),a(4,"ThinkCivil IAS / \u0925\u093F\u0902\u0915\u0938\u093F\u0935\u093F\u0932 \u0906\u0908\u090F\u090F\u0938"),r(),o(5,"mat-card-subtitle"),a(6,"Create your account / \u0905\u092A\u0928\u093E \u0916\u093E\u0924\u093E \u092C\u0928\u093E\u090F\u0902"),r()(),o(7,"mat-card-content")(8,"form",2),g("ngSubmit",function(){return e.onSubmit()}),o(9,"mat-form-field",3)(10,"mat-label"),a(11,"\u092A\u0942\u0930\u093E \u0928\u093E\u092E / Full Name"),r(),f(12,"input",4),p(13,_e,2,0,"mat-error",5),r(),o(14,"mat-form-field",3)(15,"mat-label"),a(16,"\u0908\u092E\u0947\u0932 / Email"),r(),f(17,"input",6),p(18,he,2,0,"mat-error",5)(19,Ce,2,0,"mat-error",5),r(),o(20,"button",7),g("click",function(){return e.sendOTP()}),p(21,be,1,0,"mat-spinner",8)(22,Pe,2,1,"span",5),r(),p(23,we,18,11,"div",9),o(24,"mat-form-field",3)(25,"mat-label"),a(26,"\u092B\u094B\u0928 \u0928\u0902\u092C\u0930 / Phone Number"),r(),f(27,"input",10),p(28,ye,2,0,"mat-error",5)(29,Oe,2,0,"mat-error",5),r(),o(30,"mat-form-field",3)(31,"mat-label"),a(32,"\u092A\u093E\u0938\u0935\u0930\u094D\u0921 / Password"),r(),f(33,"input",11),o(34,"button",12),g("click",function(){return e.togglePasswordVisibility()}),o(35,"mat-icon"),a(36),r()(),p(37,Te,2,0,"mat-error",5)(38,Fe,2,0,"mat-error",5),r(),o(39,"mat-form-field",3)(40,"mat-label"),a(41,"\u092A\u093E\u0938\u0935\u0930\u094D\u0921 \u0915\u0940 \u092A\u0941\u0937\u094D\u091F\u093F \u0915\u0930\u0947\u0902 / Confirm Password"),r(),f(42,"input",13),o(43,"button",12),g("click",function(){return e.toggleConfirmPasswordVisibility()}),o(44,"mat-icon"),a(45),r()(),p(46,Me,2,0,"mat-error",5),r(),p(47,Se,2,0,"mat-error",5),o(48,"button",14),p(49,ke,1,0,"mat-spinner",8)(50,Ie,2,1,"span",5),r()(),o(51,"div",15)(52,"p"),a(53,"\u092A\u0939\u0932\u0947 \u0938\u0947 \u0939\u0940 \u090F\u0915 \u0916\u093E\u0924\u093E \u0939\u0948? / Already have an account? "),o(54,"a",16),a(55,"\u092F\u0939\u093E\u0902 \u0932\u0949\u0917\u093F\u0928 \u0915\u0930\u0947\u0902 / Login here"),r()()()()()()),s&2){let m,C,l,v,w,y,O,T,F,M;n(8),u("formGroup",e.registerForm),n(5),u("ngIf",(m=e.registerForm.get("fullName"))==null?null:m.hasError("required")),n(4),u("readonly",e.otpSent()),n(),u("ngIf",(C=e.registerForm.get("email"))==null?null:C.hasError("required")),n(),u("ngIf",(l=e.registerForm.get("email"))==null?null:l.hasError("email")),n(),u("disabled",e.sendingOTP()||e.otpSent()||((v=e.registerForm.get("email"))==null?null:v.invalid)),n(),u("ngIf",e.sendingOTP()),n(),u("ngIf",!e.sendingOTP()),n(),u("ngIf",e.showOTPField()),n(5),u("ngIf",(w=e.registerForm.get("phone"))==null?null:w.hasError("required")),n(),u("ngIf",(y=e.registerForm.get("phone"))==null?null:y.hasError("pattern")),n(4),u("type",e.showPassword()?"text":"password"),n(3),P(e.showPassword()?"visibility_off":"visibility"),n(),u("ngIf",(O=e.registerForm.get("password"))==null?null:O.hasError("required")),n(),u("ngIf",(T=e.registerForm.get("password"))==null?null:T.hasError("minlength")),n(4),u("type",e.showConfirmPassword()?"text":"password"),n(3),P(e.showConfirmPassword()?"visibility_off":"visibility"),n(),u("ngIf",(F=e.registerForm.get("confirmPassword"))==null?null:F.hasError("required")),n(),u("ngIf",e.registerForm.hasError("passwordMismatch")&&((M=e.registerForm.get("confirmPassword"))==null?null:M.touched)),n(),u("disabled",!e.registerForm.valid||e.loading()||!e.otpVerified()),n(),u("ngIf",e.loading()),n(),u("ngIf",!e.loading())}},dependencies:[A,R,H,G,q,N,z,j,L,$,V,X,W,K,U,Q,J,ne,re,Z,te,ee,ie,ae,oe,le,se,ue,de,me,fe,ce],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#e0f7fa,#e3f2fd,#e8eaf6);font-family:Poppins,sans-serif}.register-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:2.5rem;border-radius:20px;box-shadow:0 10px 30px #0000001a;background:#fff;text-align:center;transition:all .3s ease-in-out}.register-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 40px #00000026}mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:2rem;padding:0}mat-card-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:600;color:#1565c0;margin-bottom:.5rem}mat-card-subtitle[_ngcontent-%COMP%]{color:#616161;font-size:1rem;margin-bottom:0}mat-card-content[_ngcontent-%COMP%]{padding:0}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem}.otp-button[_ngcontent-%COMP%]{margin-top:-.5rem;margin-bottom:1.2rem;background:linear-gradient(90deg,#4caf50,#2e7d32)!important}.otp-button[_ngcontent-%COMP%]:hover:not([disabled]){background:linear-gradient(90deg,#2e7d32,#1b5e20)!important;box-shadow:0 4px 10px #4caf5066!important}.otp-section[_ngcontent-%COMP%]{margin-bottom:1.2rem;animation:_ngcontent-%COMP%_fadeIn .3s ease}.otp-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:.5rem}.otp-status[_ngcontent-%COMP%]{font-size:.9rem;color:#ff9800;font-weight:500}.otp-status.verified[_ngcontent-%COMP%]{color:#4caf50}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}  .mat-mdc-text-field-wrapper{border-radius:8px!important}  .mat-mdc-form-field-subscript-wrapper{display:none}  .mat-mdc-form-field{--mat-form-field-container-height: 56px}  .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:12px;padding-bottom:8px}button[mat-raised-button][_ngcontent-%COMP%]{width:100%;padding:.85rem;margin-top:.5rem;background:linear-gradient(90deg,#42a5f5,#1e88e5);color:#fff;font-weight:600;letter-spacing:.5px;border-radius:8px;transition:all .3s ease;font-size:1rem;text-transform:none}button[mat-raised-button][_ngcontent-%COMP%]:hover:not([disabled]){background:linear-gradient(90deg,#1e88e5,#1565c0);box-shadow:0 4px 10px #2196f366}button[mat-raised-button][_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.login-link[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.2rem;border-top:1px solid #eee}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#555;margin:0}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1e88e5;text-decoration:none;font-weight:500;transition:color .2s ease}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#1565c0}mat-error[_ngcontent-%COMP%]{font-size:.8rem;margin-top:-.5rem;margin-bottom:.5rem;display:block}mat-card-content[_ngcontent-%COMP%] > mat-error[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:1rem;text-align:center;background:#ffebee;padding:.5rem;border-radius:4px;color:#c62828}mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin:0 auto}@media (max-width: 480px){.register-container[_ngcontent-%COMP%]{padding:15px}.register-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem}mat-card-subtitle[_ngcontent-%COMP%]{font-size:.9rem}}  .mat-mdc-text-field-wrapper.mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__leading,   .mat-mdc-text-field-wrapper.mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__notch,   .mat-mdc-text-field-wrapper.mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__trailing{border-color:#1e88e5!important}  .mat-mdc-form-field.mat-focused .mat-mdc-floating-label{color:#1e88e5!important}"]})};export{ge as RegisterComponent};
